import { _ as _export_sfc, c as createElementBlock, o as openBlock, ag as createStaticVNode } from "./chunks/framework.vWx6JuJ5.js";
const __pageData = JSON.parse('{"title":"SuperPaymaster Experiment Task Breakdown","description":"","frontmatter":{},"headers":[],"relativePath":"guide/task_breakdown.md","filePath":"guide/task_breakdown.md","lastUpdated":1766635771000}');
const _sfc_main = { name: "guide/task_breakdown.md" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [..._cache[0] || (_cache[0] = [
    createStaticVNode('<h1 id="superpaymaster-experiment-task-breakdown" tabindex="-1">SuperPaymaster Experiment Task Breakdown <a class="header-anchor" href="#superpaymaster-experiment-task-breakdown" aria-label="Permalink to &quot;SuperPaymaster Experiment Task Breakdown&quot;">​</a></h1><p>Based on the PhD research requirements and the &quot;Three-Step&quot; (Prepare, Test, Analyze) strategy.</p><h2 id="phase-0-foundation-configuration" tabindex="-1">Phase 0: Foundation &amp; Configuration <a class="header-anchor" href="#phase-0-foundation-configuration" aria-label="Permalink to &quot;Phase 0: Foundation &amp; Configuration&quot;">​</a></h2><ul><li><p>[x] <strong>0.1. Environment Setup (<code>.env.v3</code>)</strong></p><ul><li>[x] Create <code>projects/env/.env.v3</code>.</li><li>[x] Populate RPC variables (<code>SEPOLIA_RPC_URL</code>, <code>ALCHEMY_BUNDLER_RPC_URL</code>).</li><li>[x] Populate Account Key in .env.v3</li><li>[x] Populate Contract Addresses (Superseding <code>.env</code> if needed, but prioritizing <code>@aastar/shared-config</code>).</li></ul></li><li><p>[x] <strong>0.2. SDK Architecture Refinement</strong></p><ul><li>[x] Validate <code>@aastar/shared-config</code> integration for addresses (<code>SuperPaymaster</code>, <code>MySBT</code>, <code>GToken</code>).</li><li>[x] Ensure <code>@aastar/core</code> exports <code>viem</code> clients configured for Sepolia and all networks.</li></ul></li></ul><h2 id="phase-1-preparation-the-ammo" tabindex="-1">Phase 1: Preparation (The &quot;Ammo&quot;) <a class="header-anchor" href="#phase-1-preparation-the-ammo" aria-label="Permalink to &quot;Phase 1: Preparation (The &quot;Ammo&quot;)&quot;">​</a></h2><ul><li>[x] <strong>1.1. Automated Preparation (The &quot;Ammo&quot;) (<code>scripts/01_prepare_all.ts</code>)</strong><ul><li>[x] <strong>Unified Script</strong>: Runs all checks below.</li><li>[x] <strong>Account Check</strong>: Computes addresses for A, B, C.</li><li>[x] <strong>ETH Check</strong>: Funds 0.05 ETH from Supplier if low.</li><li>[x] <strong>Identity Check</strong>: Checks MySBT balance for SuperPaymaster User (C). Mints if missing.</li><li>[x] <strong>Asset Check</strong>: Checks xPNTs (GToken) balance for SuperPaymaster User (C). Transfers if low.</li></ul></li></ul><h2 id="phase-2-testing-the-execution" tabindex="-1">Phase 2: Testing (The Execution) <a class="header-anchor" href="#phase-2-testing-the-execution" aria-label="Permalink to &quot;Phase 2: Testing (The Execution)&quot;">​</a></h2><ol><li>Transfer ERC20 Test in sepolia, op sepolia and op mainnet.</li><li>Perform 48 times ERC20 Transfers, 2 times per hour in random time in one hour.</li><li>Use Alchemy bundler RPC in .env.v3 as default bundler.</li><li>Use PIM as erc20 gas token in pimlico paymaster test.</li><li>Make all scripts for every test and use run_daily_experiment.ts to orchestrate the above scripts.</li><li>Transfer any ERC20(use aPNTs, get it from supplier) to target receiver: TEST_RECEIVER_ADDRESS in .env.v3.</li></ol><ul><li><p>[/] <strong>2.1. Baseline 1: EOA Transfers (<code>scripts/02_test_eoa.ts</code>)</strong></p><ul><li>[ ] Use <code>PRIVATE_KEY_RELAYER</code> as test EOA, address: 0xb5600060e6de5E11D3636731964218E53caadf0E.</li><li>[ ] Log metrics.</li></ul></li><li><p>[ ] <strong>2.2. Baseline 2: Standard AA (<code>scripts/03_test_standard_aa.ts</code>)</strong></p><ul><li>[ ] Use <code>TEST_SIMPLE_ACCOUNT_A</code> + <code>pimlico/permissionless</code> ,<a href="https://docs.pimlico.io/references/bundler/endpoints/eth_sendUserOperation" target="_blank" rel="noreferrer">https://docs.pimlico.io/references/bundler/endpoints/eth_sendUserOperation</a>, use PIM as erc20 gas token, get it from supplier, token address: 0xFC3e86566895Fb007c6A0d3809eb2827DF94F751, use Alchemy bundler RPC in .env.v3</li><li>[ ] Perform 48 UserOps in 24 hours.</li><li>[ ] Log metrics.</li></ul></li><li><p>[ ] <strong>2.3. Experiment: SuperPaymaster (<code>scripts/04_test_superpaymaster.ts</code>)</strong><em>Core of the PhD contribution.</em></p><ul><li>[ ] Use <code>TEST_SIMPLE_ACCOUNT_B</code> +Alchemy bundler + Paymaster (Verifying Paymaster V4.1，来自于@aastar/shared-config).</li><li>[ ] Use <code>TEST_SIMPLE_ACCOUNT_C</code> + <code>@aastar/superpaymaster</code> get address from @aastar/shared-config, use Alchemy bundler.</li><li>[ ] Construct UserOp with <code>paymasterAndData</code> (V3 format).</li><li>[ ] Send to Bundler.</li><li>[ ] Log metrics (Gas Used, L1 Fee, Time).</li></ul></li><li><p>[ ] <strong>2.4. Automation Runner (<code>scripts/run_daily_experiment.ts</code>)</strong></p><ul><li>[ ] Orchestrate the above scripts.</li><li>[ ] Add random delays (simulation of real usage).</li><li>[ ] Output to <code>data/raw_experiment_data.csv</code>.</li></ul></li></ul><h2 id="phase-3-analysis-the-result" tabindex="-1">Phase 3: Analysis (The Result) <a class="header-anchor" href="#phase-3-analysis-the-result" aria-label="Permalink to &quot;Phase 3: Analysis (The Result)&quot;">​</a></h2><ul><li>[ ] <strong>3.1. Data Analysis (<code>scripts/05_analyze_data.ts</code>)</strong><ul><li>[ ] Read CSV.</li><li>[ ] Compute Averages &amp; Standard Deviation.</li><li>[ ] Compare Cost vs Baseline.</li><li>[ ] Compare Time vs Baseline.</li><li>[ ] Generate Markdown Table for Thesis.</li></ul></li></ul><h2 id="phase-4-特性验证与联动测试" tabindex="-1">Phase 4: 特性验证与联动测试 [/] <a class="header-anchor" href="#phase-4-特性验证与联动测试" aria-label="Permalink to &quot;Phase 4: 特性验证与联动测试 [/]&quot;">​</a></h2><h3 id="phase-5-staking-退出与-slash-测试-12-ts-⚠️-debugging" tabindex="-1">Phase 5: Staking 退出与 Slash 测试 (12_*.ts) [⚠️ Debugging] <a class="header-anchor" href="#phase-5-staking-退出与-slash-测试-12-ts-⚠️-debugging" aria-label="Permalink to &quot;Phase 5: Staking 退出与 Slash 测试 (12_*.ts) [⚠️ Debugging]&quot;">​</a></h3><ul><li>[ ] unlock → withdraw 正常流程 (Fixed: Slash deduction bug)</li><li>[ ] Slash 参数验证（罚没、国库、退款）</li><li>[ ] 时间锁测试（提前退出拒绝） <ul><li>[ ] 在 Registry 中增加 roleLockDurations 映射</li></ul></li><li>[ ] Debug Registry.sol registration logic (RoleNotGranted)</li><li>[ ] Fix syntax errors and add raw error logging in 13_test_sbt_burn_linkage.ts</li><li>[ ] Verify active SBT burn and exit linkage</li></ul><h3 id="phase-6-mysbt-burn-linkage-integration-active-debugging" tabindex="-1">Phase 6: MySBT Burn &amp; Linkage Integration (Active Debugging) <a class="header-anchor" href="#phase-6-mysbt-burn-linkage-integration-active-debugging" aria-label="Permalink to &quot;Phase 6: MySBT Burn &amp; Linkage Integration (Active Debugging)&quot;">​</a></h3><ul><li>[ ] 实现 Registry.exitRole 与 MySBT 销毁/停用联动 <ul><li>[ ] 在 IMySBTV3 中添加 deactivateMembership 接口</li><li>[ ] 在 MySBT 中实现权限受控的 deactivateMembership</li><li>[ ] 在 Registry.exitRole 中增加对 ROLE_ENDUSER 的 SBT 联动调用</li></ul></li><li>[ ] 验证 <code>13_test_sbt_burn_linkage.ts</code><ul><li>[ ] 完整流程 (正在解决 Anvil Revert)</li><li>[ ] 同步最新合约 ABI 到 SDK</li></ul></li><li>[ ] 解决 registerRoleSelf 报错 (正在排查 Eve 地址与角色状态)</li><li>[ ] 确保 getMemberships 在角色退出后返回 isActive: false</li></ul><h3 id="phase-7-集成与覆盖率报告" tabindex="-1">Phase 7: 集成与覆盖率报告 <a class="header-anchor" href="#phase-7-集成与覆盖率报告" aria-label="Permalink to &quot;Phase 7: 集成与覆盖率报告&quot;">​</a></h3><ul><li>[ ] 更新 test:local 脚本包含所有新测试</li><li>[ ] 生成覆盖率报告（目标 80%+）</li><li>[ ] 执行完整回归并验证通过</li></ul><h2 id="phase-8-sdk-架构演进与对齐-⚠️-暂停" tabindex="-1">Phase 8: SDK 架构演进与对齐 [⚠️ 暂停] <a class="header-anchor" href="#phase-8-sdk-架构演进与对齐-⚠️-暂停" aria-label="Permalink to &quot;Phase 8: SDK 架构演进与对齐 [⚠️ 暂停]&quot;">​</a></h2><blockquote><p><strong>WARNING</strong>: 优先级调整：在达到 80% 测试覆盖率之前，暂停以下工作：</p><ul><li>SDK 标准化封装（SuperPaymasterClient）</li><li>链上数据采集与基准测试</li></ul></blockquote><h3 id="阶段一-架构标准化-v0-4-x" tabindex="-1">阶段一：架构标准化 (v0.4.x) <a class="header-anchor" href="#阶段一-架构标准化-v0-4-x" aria-label="Permalink to &quot;阶段一：架构标准化 (v0.4.x)&quot;">​</a></h3><ul><li>[ ] 基于 viem 与 AirAccount (Permissionless-style) 的架构重构</li><li>[ ] 定义 SuperPaymasterClient 与语义化 Error Mapper</li></ul><h3 id="阶段二-生产力工具-v0-5-x" tabindex="-1">阶段二：生产力工具 (v0.5.x) <a class="header-anchor" href="#阶段二-生产力工具-v0-5-x" aria-label="Permalink to &quot;阶段二：生产力工具 (v0.5.x)&quot;">​</a></h3><ul><li>[ ] UserOp Factory 与基线/对比测试数据导出 (CSV)</li></ul><h3 id="阶段三-ui-集成-v0-6-x" tabindex="-1">阶段三：UI 集成 (v0.6.x) <a class="header-anchor" href="#阶段三-ui-集成-v0-6-x" aria-label="Permalink to &quot;阶段三：UI 集成 (v0.6.x)&quot;">​</a></h3><ul><li>[ ] React Hooks 与评价面板组件</li></ul><h2 id="phase-9-论文量化评估准备-⚠️-暂停" tabindex="-1">Phase 9: 论文量化评估准备 [⚠️ 暂停] <a class="header-anchor" href="#phase-9-论文量化评估准备-⚠️-暂停" aria-label="Permalink to &quot;Phase 9: 论文量化评估准备 [⚠️ 暂停]&quot;">​</a></h2><ul><li>[ ] 搭建基线测试 (EOA vs Pimlico) 脚本</li><li>[ ] 自动化 CSV 采集与绘图数据预处理</li></ul><h2 id="appendix-account-roles-keys" tabindex="-1">Appendix: Account Roles &amp; Keys <a class="header-anchor" href="#appendix-account-roles-keys" aria-label="Permalink to &quot;Appendix: Account Roles &amp; Keys&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Role</th><th style="text-align:left;">Variable</th><th style="text-align:left;">Purpose</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Supplier</strong></td><td style="text-align:left;"><code>SUPPLIER_KEY</code></td><td style="text-align:left;">Holds test ETH &amp; GTokens. Funds others.</td></tr><tr><td style="text-align:left;"><strong>Operator</strong></td><td style="text-align:left;"><code>OPERATOR_JASON_KEY</code></td><td style="text-align:left;">Admin of AAStar. Mints SBTs.</td></tr><tr><td style="text-align:left;"><strong>Relayer</strong></td><td style="text-align:left;"><code>RELAYER_KEY</code></td><td style="text-align:left;">Performs EOA baseline tests.</td></tr><tr><td style="text-align:left;"><strong>AA User 1</strong></td><td style="text-align:left;"><code>OWNER_JASON_KEY</code></td><td style="text-align:left;">Controls SuperPaymaster AA.</td></tr><tr><td style="text-align:left;"><strong>AA User 2</strong></td><td style="text-align:left;"><code>OWNER_ANNI_KEY</code></td><td style="text-align:left;">Controls Standard Paymaster AA.</td></tr></tbody></table>', 30)
  ])]);
}
const task_breakdown = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  task_breakdown as default
};
