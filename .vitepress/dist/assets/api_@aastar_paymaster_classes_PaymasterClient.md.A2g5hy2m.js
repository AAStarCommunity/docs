import{_ as t,c as o,o as d,ag as a}from"./chunks/framework.dvv-DFtf.js";const b=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/@aastar/paymaster/classes/PaymasterClient.md","filePath":"api/@aastar/paymaster/classes/PaymasterClient.md","lastUpdated":1769237380000}'),r={name:"api/@aastar/paymaster/classes/PaymasterClient.md"};function c(s,e,i,n,l,h){return d(),o("div",null,[...e[0]||(e[0]=[a('<p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L9" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:9</a></p><p>PaymasterClient Focus: Integration, Funding, Interaction.</p><h2 id="constructors" tabindex="-1">Constructors <a class="header-anchor" href="#constructors" aria-label="Permalink to &quot;Constructors&quot;">​</a></h2><h3 id="constructor" tabindex="-1">Constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;Constructor&quot;">​</a></h3><blockquote><p><strong>new PaymasterClient</strong>(): <code>PaymasterClient</code></p></blockquote><h4 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>PaymasterClient</code></p><h2 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h2><h3 id="approvegastoken" tabindex="-1">approveGasToken() <a class="header-anchor" href="#approvegastoken" aria-label="Permalink to &quot;approveGasToken()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>approveGasToken</strong>(<code>wallet</code>, <code>token</code>, <code>spender</code>, <code>amount</code>): <code>Promise</code>&lt;<code>any</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L48" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:48</a></p><p>Approve the Paymaster (or any spender) to spend gas tokens.</p><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>wallet</code></td><td><code>any</code></td></tr><tr><td><code>token</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>spender</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>amount</code></td><td><code>bigint</code></td></tr></tbody></table><h4 id="returns-1" tabindex="-1">Returns <a class="header-anchor" href="#returns-1" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>any</code>&gt;</p><hr><h3 id="depositfor" tabindex="-1">depositFor() <a class="header-anchor" href="#depositfor" aria-label="Permalink to &quot;depositFor()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>depositFor</strong>(<code>wallet</code>, <code>address</code>, <code>user</code>, <code>token</code>, <code>amount</code>): <code>Promise</code>&lt;<code>any</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L35" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:35</a></p><p>Deposit tokens to Paymaster for a user (enables gasless transactions).</p><h4 id="parameters-1" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>wallet</code></td><td><code>any</code></td></tr><tr><td><code>address</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>user</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>token</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>amount</code></td><td><code>bigint</code></td></tr></tbody></table><h4 id="returns-2" tabindex="-1">Returns <a class="header-anchor" href="#returns-2" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>any</code>&gt;</p><hr><h3 id="encodeexecution" tabindex="-1">encodeExecution() <a class="header-anchor" href="#encodeexecution" aria-label="Permalink to &quot;encodeExecution()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>encodeExecution</strong>(<code>target</code>, <code>value</code>, <code>data</code>): <code>`0x${string}`</code></p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L468" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:468</a></p><p>Helper: Encode a SimpleAccount execution. Wraps the inner call into: <code>execute(target, value, data)</code> This is the payload signed by the user.</p><h4 id="parameters-2" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>target</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>value</code></td><td><code>bigint</code></td></tr><tr><td><code>data</code></td><td><code>`0x${string}`</code></td></tr></tbody></table><h4 id="returns-3" tabindex="-1">Returns <a class="header-anchor" href="#returns-3" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>`0x${string}`</code></p><hr><h3 id="encodetokentransfer" tabindex="-1">encodeTokenTransfer() <a class="header-anchor" href="#encodetokentransfer" aria-label="Permalink to &quot;encodeTokenTransfer()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>encodeTokenTransfer</strong>(<code>recipient</code>, <code>amount</code>): <code>`0x${string}`</code></p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L455" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:455</a></p><p>Helper: Encode a standardized ERC-20 Transfer. Returns the raw function data: <code>transfer(to, amount)</code></p><h4 id="parameters-3" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-3" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>recipient</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>amount</code></td><td><code>bigint</code></td></tr></tbody></table><h4 id="returns-4" tabindex="-1">Returns <a class="header-anchor" href="#returns-4" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>`0x${string}`</code></p><hr><h3 id="estimateuseroperationgas" tabindex="-1">estimateUserOperationGas() <a class="header-anchor" href="#estimateuseroperationgas" aria-label="Permalink to &quot;estimateUserOperationGas()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>estimateUserOperationGas</strong>(<code>client</code>, <code>wallet</code>, <code>aaAddress</code>, <code>entryPoint</code>, <code>paymasterAddress</code>, <code>token</code>, <code>bundlerUrl</code>, <code>callData</code>, <code>options?</code>): <code>Promise</code>&lt;{ <code>callGasLimit</code>: <code>bigint</code>; <code>paymasterPostOpGasLimit</code>: <code>bigint</code>; <code>paymasterVerificationGasLimit</code>: <code>bigint</code> | <code>undefined</code>; <code>preVerificationGas</code>: <code>bigint</code>; <code>verificationGasLimit</code>: <code>bigint</code>; }&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L61" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:61</a></p><p>Estimate Gas for a UserOperation.</p><h4 id="parameters-4" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-4" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>client</code></td><td><code>any</code></td></tr><tr><td><code>wallet</code></td><td><code>any</code></td></tr><tr><td><code>aaAddress</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>entryPoint</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>paymasterAddress</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>token</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>bundlerUrl</code></td><td><code>string</code></td></tr><tr><td><code>callData</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options?</code></td><td>{ <code>factory?</code>: <code>`0x${string}`</code>; <code>factoryData?</code>: <code>`0x${string}`</code>; <code>operator?</code>: <code>`0x${string}`</code>; <code>validityWindow?</code>: <code>number</code>; }</td></tr><tr><td><code>options.factory?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.factoryData?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.operator?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.validityWindow?</code></td><td><code>number</code></td></tr></tbody></table><h4 id="returns-5" tabindex="-1">Returns <a class="header-anchor" href="#returns-5" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;{ <code>callGasLimit</code>: <code>bigint</code>; <code>paymasterPostOpGasLimit</code>: <code>bigint</code>; <code>paymasterVerificationGasLimit</code>: <code>bigint</code> | <code>undefined</code>; <code>preVerificationGas</code>: <code>bigint</code>; <code>verificationGasLimit</code>: <code>bigint</code>; }&gt;</p><hr><h3 id="getdepositedbalance" tabindex="-1">getDepositedBalance() <a class="header-anchor" href="#getdepositedbalance" aria-label="Permalink to &quot;getDepositedBalance()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>getDepositedBalance</strong>(<code>publicClient</code>, <code>address</code>, <code>user</code>, <code>token</code>): <code>Promise</code>&lt;<code>bigint</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L14" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:14</a></p><p>Get user&#39;s deposited balance on the Paymaster.</p><h4 id="parameters-5" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-5" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>publicClient</code></td><td><code>any</code></td></tr><tr><td><code>address</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>user</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>token</code></td><td><code>`0x${string}`</code></td></tr></tbody></table><h4 id="returns-6" tabindex="-1">Returns <a class="header-anchor" href="#returns-6" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>bigint</code>&gt;</p><hr><h3 id="getfeefromreceipt" tabindex="-1">getFeeFromReceipt() <a class="header-anchor" href="#getfeefromreceipt" aria-label="Permalink to &quot;getFeeFromReceipt()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>getFeeFromReceipt</strong>(<code>receipt</code>, <code>paymasterAddress</code>): { <code>actualGasCostWei</code>: <code>bigint</code>; <code>tokenCost</code>: <code>bigint</code>; } | <code>null</code></p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L415" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:415</a></p><p>Helper to extract the actual Gas Token fee from a UserOperation receipt. Looks for the &#39;PostOpProcessed&#39; event emitted by the Paymaster.</p><h4 id="parameters-6" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-6" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>receipt</code></td><td><code>any</code></td></tr><tr><td><code>paymasterAddress</code></td><td><code>`0x${string}`</code></td></tr></tbody></table><h4 id="returns-7" tabindex="-1">Returns <a class="header-anchor" href="#returns-7" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p>{ <code>actualGasCostWei</code>: <code>bigint</code>; <code>tokenCost</code>: <code>bigint</code>; } | <code>null</code></p><hr><h3 id="gettransactionfee" tabindex="-1">getTransactionFee() <a class="header-anchor" href="#gettransactionfee" aria-label="Permalink to &quot;getTransactionFee()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>getTransactionFee</strong>(<code>publicClient</code>, <code>txHash</code>, <code>paymasterAddress</code>): <code>Promise</code>&lt;{ <code>actualGasCostWei</code>: <code>bigint</code>; <code>tokenCost</code>: <code>bigint</code>; } | <code>null</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L442" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:442</a></p><p>Get the fee for a specific transaction hash. Fetches the receipt (no scanning required) and decodes the log.</p><h4 id="parameters-7" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-7" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>publicClient</code></td><td><code>any</code></td></tr><tr><td><code>txHash</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>paymasterAddress</code></td><td><code>`0x${string}`</code></td></tr></tbody></table><h4 id="returns-8" tabindex="-1">Returns <a class="header-anchor" href="#returns-8" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;{ <code>actualGasCostWei</code>: <code>bigint</code>; <code>tokenCost</code>: <code>bigint</code>; } | <code>null</code>&gt;</p><hr><h3 id="submitgaslessuseroperation" tabindex="-1">submitGaslessUserOperation() <a class="header-anchor" href="#submitgaslessuseroperation" aria-label="Permalink to &quot;submitGaslessUserOperation()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>submitGaslessUserOperation</strong>(<code>client</code>, <code>wallet</code>, <code>aaAddress</code>, <code>entryPoint</code>, <code>paymasterAddress</code>, <code>token</code>, <code>bundlerUrl</code>, <code>callData</code>, <code>options?</code>): <code>Promise</code>&lt;<code>`0x${string}`</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L229" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:229</a></p><p>High-level API to submit a gasless UserOperation. Automatically handles nonce fetching, gas estimation (if not provided), signing, and submission.</p><h4 id="parameters-8" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-8" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th></tr></thead><tbody><tr><td><code>client</code></td><td><code>any</code></td></tr><tr><td><code>wallet</code></td><td><code>any</code></td></tr><tr><td><code>aaAddress</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>entryPoint</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>paymasterAddress</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>token</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>bundlerUrl</code></td><td><code>string</code></td></tr><tr><td><code>callData</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options?</code></td><td>{ <code>autoEstimate?</code>: <code>boolean</code>; <code>callGasLimit?</code>: <code>bigint</code>; <code>factory?</code>: <code>`0x${string}`</code>; <code>factoryData?</code>: <code>`0x${string}`</code>; <code>maxFeePerGas?</code>: <code>bigint</code>; <code>maxPriorityFeePerGas?</code>: <code>bigint</code>; <code>operator?</code>: <code>`0x${string}`</code>; <code>paymasterPostOpGasLimit?</code>: <code>bigint</code>; <code>paymasterVerificationGasLimit?</code>: <code>bigint</code>; <code>preVerificationGas?</code>: <code>bigint</code>; <code>validityWindow?</code>: <code>number</code>; <code>verificationGasLimit?</code>: <code>bigint</code>; }</td></tr><tr><td><code>options.autoEstimate?</code></td><td><code>boolean</code></td></tr><tr><td><code>options.callGasLimit?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.factory?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.factoryData?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.maxFeePerGas?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.maxPriorityFeePerGas?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.operator?</code></td><td><code>`0x${string}`</code></td></tr><tr><td><code>options.paymasterPostOpGasLimit?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.paymasterVerificationGasLimit?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.preVerificationGas?</code></td><td><code>bigint</code></td></tr><tr><td><code>options.validityWindow?</code></td><td><code>number</code></td></tr><tr><td><code>options.verificationGasLimit?</code></td><td><code>bigint</code></td></tr></tbody></table><h4 id="returns-9" tabindex="-1">Returns <a class="header-anchor" href="#returns-9" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>`0x${string}`</code>&gt;</p><hr><h3 id="waitforuseroperation" tabindex="-1">waitForUserOperation() <a class="header-anchor" href="#waitforuseroperation" aria-label="Permalink to &quot;waitForUserOperation()&quot;">​</a></h3><blockquote><p><code>static</code> <strong>waitForUserOperation</strong>(<code>bundlerClient</code>, <code>hash</code>, <code>timeout</code>): <code>Promise</code>&lt;<code>any</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/paymaster/src/V4/PaymasterClient.ts#L480" target="_blank" rel="noreferrer">V4/PaymasterClient.ts:480</a></p><p>More robust version of waitForUserOperationReceipt. Catches timeouts and returns a cleaner result.</p><h4 id="parameters-9" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-9" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Default value</th></tr></thead><tbody><tr><td><code>bundlerClient</code></td><td><code>any</code></td><td><code>undefined</code></td></tr><tr><td><code>hash</code></td><td><code>`0x${string}`</code></td><td><code>undefined</code></td></tr><tr><td><code>timeout</code></td><td><code>number</code></td><td><code>60000</code></td></tr></tbody></table><h4 id="returns-10" tabindex="-1">Returns <a class="header-anchor" href="#returns-10" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>any</code>&gt;</p>',97)])])}const m=t(r,[["render",c]]);export{b as __pageData,m as default};
