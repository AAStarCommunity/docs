import { _ as _export_sfc, c as createElementBlock, o as openBlock, ag as createStaticVNode } from "./chunks/framework.vWx6JuJ5.js";
const __pageData = JSON.parse('{"title":"Account Abstraction","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/concepts/account-abstraction.md","filePath":"zh/guide/concepts/account-abstraction.md"}');
const _sfc_main = { name: "zh/guide/concepts/account-abstraction.md" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [..._cache[0] || (_cache[0] = [
    createStaticVNode('<h1 id="account-abstraction" tabindex="-1">Account Abstraction <a class="header-anchor" href="#account-abstraction" aria-label="Permalink to &quot;Account Abstraction&quot;">​</a></h1><p>Understanding Account Abstraction (ERC-4337) in AAStar SDK.</p><h2 id="what-is-account-abstraction" tabindex="-1">What is Account Abstraction? <a class="header-anchor" href="#what-is-account-abstraction" aria-label="Permalink to &quot;What is Account Abstraction?&quot;">​</a></h2><p>Account Abstraction (AA) allows users to use smart contract wallets instead of traditional Externally Owned Accounts (EOAs). This enables advanced features like:</p><ul><li><strong>Gasless Transactions</strong>: Users don&#39;t need ETH for gas</li><li><strong>Social Recovery</strong>: Recover accounts without seed phrases</li><li><strong>Session Keys</strong>: Temporary permissions for DApps</li><li><strong>Batch Transactions</strong>: Multiple operations in one transaction</li><li><strong>Custom Validation</strong>: Flexible signature schemes</li></ul><h2 id="erc-4337-overview" tabindex="-1">ERC-4337 Overview <a class="header-anchor" href="#erc-4337-overview" aria-label="Permalink to &quot;ERC-4337 Overview&quot;">​</a></h2><p>ERC-4337 is the standard for Account Abstraction. Key components:</p><h3 id="useroperation" tabindex="-1">UserOperation <a class="header-anchor" href="#useroperation" aria-label="Permalink to &quot;UserOperation&quot;">​</a></h3><p>A pseudo-transaction object that represents a user&#39;s intent:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  sender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Smart account address</span></span>\n<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  nonce</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Anti-replay protection</span></span>\n<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  callData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Hex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Actual transaction data</span></span>\n<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  paymasterAndData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Hex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Paymaster info (for gasless tx)</span></span>\n<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  signature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Hex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// User signature</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... gas fields</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="entrypoint" tabindex="-1">EntryPoint <a class="header-anchor" href="#entrypoint" aria-label="Permalink to &quot;EntryPoint&quot;">​</a></h3><p>The singleton contract that processes UserOperations.</p><h3 id="bundler" tabindex="-1">Bundler <a class="header-anchor" href="#bundler" aria-label="Permalink to &quot;Bundler&quot;">​</a></h3><p>Off-chain service that bundles UserOperations and submits them to the EntryPoint.</p><h3 id="paymaster" tabindex="-1">Paymaster <a class="header-anchor" href="#paymaster" aria-label="Permalink to &quot;Paymaster&quot;">​</a></h3><p>Contract that sponsors gas fees for users.</p><h2 id="aastar-implementation" tabindex="-1">AAStar Implementation <a class="header-anchor" href="#aastar-implementation" aria-label="Permalink to &quot;AAStar Implementation&quot;">​</a></h2><p>AAStar SDK provides a complete AA infrastructure:</p><h3 id="smart-accounts" tabindex="-1">Smart Accounts <a class="header-anchor" href="#smart-accounts" aria-label="Permalink to &quot;Smart Accounts&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createSmartAccount } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/account&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> account</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createSmartAccount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  owner: ownerAddress,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  salt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  factoryAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CONTRACTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sepolia.simpleAccountFactory,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="gasless-transactions" tabindex="-1">Gasless Transactions <a class="header-anchor" href="#gasless-transactions" aria-label="Permalink to &quot;Gasless Transactions&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createEndUserClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createEndUserClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Check eligibility</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eligible</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkEligibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(communityAddress);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (eligible) {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Send gasless transaction</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendGaslessTransaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="benefits" tabindex="-1">Benefits <a class="header-anchor" href="#benefits" aria-label="Permalink to &quot;Benefits&quot;">​</a></h2><ol><li><strong>Better UX</strong>: Users don&#39;t need to understand gas or hold ETH</li><li><strong>Security</strong>: Smart contract wallets are more secure than EOAs</li><li><strong>Flexibility</strong>: Custom validation logic and recovery mechanisms</li><li><strong>Programmability</strong>: Wallets can have complex logic</li></ol><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">​</a></h2><ul><li><a href="https://eips.ethereum.org/EIPS/eip-4337" target="_blank" rel="noreferrer">ERC-4337 Specification</a></li><li><a href="/api/modules/account.html">Account Module API</a></li><li><a href="/api/roles/enduser.html">End User API</a></li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="/guide/concepts/superpaymaster.html">SuperPaymaster (AOA+)</a></li><li><a href="/guide/quick-start.html">Quick Start</a></li><li><a href="/examples/">Examples</a></li></ul>', 28)
  ])]);
}
const accountAbstraction = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  accountAbstraction as default
};
