import{_ as a,c as s,o as t,ag as i}from"./chunks/framework.dvv-DFtf.js";const k=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/@aastar/community/classes/CommunityClient.md","filePath":"api/@aastar/community/classes/CommunityClient.md","lastUpdated":1769240555000}'),r={name:"api/@aastar/community/classes/CommunityClient.md"};function n(o,e,h,l,d,c){return t(),s("div",null,[...e[0]||(e[0]=[i('<p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L66" target="_blank" rel="noreferrer">index.ts:66</a></p><p>Community management client</p><h2 id="role-required" tabindex="-1">Role Required <a class="header-anchor" href="#role-required" aria-label="Permalink to &quot;Role Required&quot;">​</a></h2><p>ROLE_COMMUNITY (for most operations after launch)</p><h2 id="description" tabindex="-1">Description <a class="header-anchor" href="#description" aria-label="Permalink to &quot;Description&quot;">​</a></h2><p>Provides high-level APIs for community lifecycle operations</p><h2 id="permission-requirements" tabindex="-1">Permission Requirements: <a class="header-anchor" href="#permission-requirements" aria-label="Permalink to &quot;Permission Requirements:&quot;">​</a></h2><ul><li><strong>Launch Community</strong>: Requires GToken balance &gt;= stakeAmount + entryBurn</li><li><strong>Issue xPNTs</strong>: Requires COMMUNITY role</li><li><strong>Configure SBT</strong>: Requires COMMUNITY role + community ownership</li></ul><h2 id="typical-users" tabindex="-1">Typical Users: <a class="header-anchor" href="#typical-users" aria-label="Permalink to &quot;Typical Users:&quot;">​</a></h2><ul><li>Community Administrators</li><li>DAO Operators</li><li>Protocol Partners</li></ul><h2 id="constructors" tabindex="-1">Constructors <a class="header-anchor" href="#constructors" aria-label="Permalink to &quot;Constructors&quot;">​</a></h2><h3 id="constructor" tabindex="-1">Constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;Constructor&quot;">​</a></h3><blockquote><p><strong>new CommunityClient</strong>(<code>publicClient</code>, <code>walletClient</code>, <code>addresses?</code>): <code>CommunityClient</code></p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L86" target="_blank" rel="noreferrer">index.ts:86</a></p><p>Initialize CommunityClient</p><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>publicClient</code></td><td><a href="./../../core/interfaces/PublicClient.html"><code>PublicClient</code></a></td><td>The public client for queries</td></tr><tr><td><code>walletClient</code></td><td><a href="./../../core/interfaces/WalletClient.html"><code>WalletClient</code></a></td><td>The wallet client for transactions</td></tr><tr><td><code>addresses?</code></td><td>{ <code>gtoken?</code>: <code>`0x${string}`</code>; <code>registry?</code>: <code>`0x${string}`</code>; <code>staking?</code>: <code>`0x${string}`</code>; }</td><td>Optional contract address overrides</td></tr><tr><td><code>addresses.gtoken?</code></td><td><code>`0x${string}`</code></td><td>-</td></tr><tr><td><code>addresses.registry?</code></td><td><code>`0x${string}`</code></td><td>-</td></tr><tr><td><code>addresses.staking?</code></td><td><code>`0x${string}`</code></td><td>-</td></tr></tbody></table><h4 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>CommunityClient</code></p><h2 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h2><h3 id="checklaunchrequirements" tabindex="-1">checkLaunchRequirements() <a class="header-anchor" href="#checklaunchrequirements" aria-label="Permalink to &quot;checkLaunchRequirements()&quot;">​</a></h3><blockquote><p><strong>checkLaunchRequirements</strong>(<code>address?</code>, <code>requiredAmount?</code>): <code>Promise</code>&lt;<a href="./../../core/interfaces/RoleRequirement.html"><code>RoleRequirement</code></a>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L124" target="_blank" rel="noreferrer">index.ts:124</a></p><p>Check if user meets requirements to launch a community</p><h4 id="parameters-1" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>address?</code></td><td><code>`0x${string}`</code></td><td>User address to check (optional, defaults to wallet account)</td></tr><tr><td><code>requiredAmount?</code></td><td><code>bigint</code></td><td>Total GToken required (stake + burn)</td></tr></tbody></table><h4 id="returns-1" tabindex="-1">Returns <a class="header-anchor" href="#returns-1" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<a href="./../../core/interfaces/RoleRequirement.html"><code>RoleRequirement</code></a>&gt;</p><p>Requirement check result</p><h4 id="role-required-1" tabindex="-1">Role Required <a class="header-anchor" href="#role-required-1" aria-label="Permalink to &quot;Role Required&quot;">​</a></h4><p>None (pre-check before registration)</p><h4 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> check</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> communityClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkLaunchRequirements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    myAddress,</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    parseEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;33&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 30 stake + 3 burn</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">check.hasEnoughGToken) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`❌ ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">missingRequirements</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h3 id="configuresbtrules" tabindex="-1">configureSBTRules() <a class="header-anchor" href="#configuresbtrules" aria-label="Permalink to &quot;configureSBTRules()&quot;">​</a></h3><blockquote><p><strong>configureSBTRules</strong>(<code>rules</code>): <code>Promise</code>&lt;<code>`0x${string}`</code>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L307" target="_blank" rel="noreferrer">index.ts:307</a></p><p>Configure SBT minting rules for the community</p><h4 id="parameters-2" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>rules</code></td><td><a href="./../interfaces/SBTRuleConfig.html"><code>SBTRuleConfig</code></a></td><td>SBT rule configuration</td></tr></tbody></table><h4 id="returns-2" tabindex="-1">Returns <a class="header-anchor" href="#returns-2" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>`0x${string}`</code>&gt;</p><p>Transaction hash</p><h4 id="role-required-2" tabindex="-1">Role Required <a class="header-anchor" href="#role-required-2" aria-label="Permalink to &quot;Role Required&quot;">​</a></h4><p>ROLE_COMMUNITY</p><h4 id="permission" tabindex="-1">Permission <a class="header-anchor" href="#permission" aria-label="Permalink to &quot;Permission&quot;">​</a></h4><p>Must be registered community admin + community ownership</p><hr><h3 id="getcommunitystats" tabindex="-1">getCommunityStats() <a class="header-anchor" href="#getcommunitystats" aria-label="Permalink to &quot;getCommunityStats()&quot;">​</a></h3><blockquote><p><strong>getCommunityStats</strong>(<code>communityId</code>): <code>Promise</code>&lt;<a href="./../interfaces/CommunityStats.html"><code>CommunityStats</code></a>&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L334" target="_blank" rel="noreferrer">index.ts:334</a></p><p>Get community statistics</p><h4 id="parameters-3" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-3" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>communityId</code></td><td><code>`0x${string}`</code></td><td>Community address</td></tr></tbody></table><h4 id="returns-3" tabindex="-1">Returns <a class="header-anchor" href="#returns-3" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<a href="./../interfaces/CommunityStats.html"><code>CommunityStats</code></a>&gt;</p><p>Community statistics</p><h4 id="role-required-3" tabindex="-1">Role Required <a class="header-anchor" href="#role-required-3" aria-label="Permalink to &quot;Role Required&quot;">​</a></h4><p>None (public query)</p><hr><h3 id="issuexpnts" tabindex="-1">issueXPNTs() <a class="header-anchor" href="#issuexpnts" aria-label="Permalink to &quot;issueXPNTs()&quot;">​</a></h3><blockquote><p><strong>issueXPNTs</strong>(<code>params</code>): <code>Promise</code>&lt;{ <code>txHash</code>: <code>`0x${string}`</code>; <code>xpntsAddress</code>: <code>`0x${string}`</code>; }&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L255" target="_blank" rel="noreferrer">index.ts:255</a></p><p>Issue community-specific xPNTs token</p><h4 id="parameters-4" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-4" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>params</code></td><td><a href="./../interfaces/XPNTsIssuanceParams.html"><code>XPNTsIssuanceParams</code></a></td><td>xPNTs issuance parameters</td></tr></tbody></table><h4 id="returns-4" tabindex="-1">Returns <a class="header-anchor" href="#returns-4" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;{ <code>txHash</code>: <code>`0x${string}`</code>; <code>xpntsAddress</code>: <code>`0x${string}`</code>; }&gt;</p><p>xPNTs contract address and transaction hash</p><h4 id="role-required-4" tabindex="-1">Role Required <a class="header-anchor" href="#role-required-4" aria-label="Permalink to &quot;Role Required&quot;">​</a></h4><p>ROLE_COMMUNITY</p><h4 id="permission-1" tabindex="-1">Permission <a class="header-anchor" href="#permission-1" aria-label="Permalink to &quot;Permission&quot;">​</a></h4><p>Must be registered community admin</p><hr><h3 id="launchcommunity" tabindex="-1">launchCommunity() <a class="header-anchor" href="#launchcommunity" aria-label="Permalink to &quot;launchCommunity()&quot;">​</a></h3><blockquote><p><strong>launchCommunity</strong>(<code>config</code>): <code>Promise</code>&lt;{ <code>communityId</code>: <code>`0x${string}`</code>; <code>txHash</code>: <code>`0x${string}`</code>; }&gt;</p></blockquote><p>Defined in: <a href="https://github.com/AAStarCommunity/aastar-sdk/blob/7f5ed5aca89613e9b5624bea21ce22cf3df12963/packages/community/src/index.ts#L174" target="_blank" rel="noreferrer">index.ts:174</a></p><p>Launch a community with one-click operation</p><h4 id="parameters-5" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-5" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>config</code></td><td><a href="./../interfaces/CommunityLaunchConfig.html"><code>CommunityLaunchConfig</code></a></td><td>Community configuration</td></tr></tbody></table><h4 id="returns-5" tabindex="-1">Returns <a class="header-anchor" href="#returns-5" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;{ <code>communityId</code>: <code>`0x${string}`</code>; <code>txHash</code>: <code>`0x${string}`</code>; }&gt;</p><p>Community ID and transaction hash</p><h4 id="role-required-5" tabindex="-1">Role Required <a class="header-anchor" href="#role-required-5" aria-label="Permalink to &quot;Role Required&quot;">​</a></h4><p>None (will register ROLE_COMMUNITY)</p><h4 id="permission-2" tabindex="-1">Permission <a class="header-anchor" href="#permission-2" aria-label="Permalink to &quot;Permission&quot;">​</a></h4><p>Requires GToken balance &gt;= stakeAmount + entryBurn</p><h4 id="description-1" tabindex="-1">Description <a class="header-anchor" href="#description-1" aria-label="Permalink to &quot;Description&quot;">​</a></h4><p>Combines: approve → stake → register → configure</p><ul><li>Auto-approves GToken for staking contract</li><li>Registers caller as COMMUNITY role</li><li>Stakes required amount</li><li><strong>Pre-checks requirements before execution</strong></li></ul><h4 id="throws" tabindex="-1">Throws <a class="header-anchor" href="#throws" aria-label="Permalink to &quot;Throws&quot;">​</a></h4><p>Error if requirements not met</p><h4 id="example-1" tabindex="-1">Example <a class="header-anchor" href="#example-1" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> communityClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommunityClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(publicClient, walletClient);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">communityId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">txHash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> communityClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launchCommunity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyDAO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        stakeAmount: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;30&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        entryBurn: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logoURI: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ipfs://...&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`✅ Community launched: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">communityId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`❌ Failed: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">message</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>',94)])])}const u=a(r,[["render",n]]);export{k as __pageData,u as default};
