import { _ as _export_sfc, c as createElementBlock, o as openBlock, ag as createStaticVNode } from "./chunks/framework.vWx6JuJ5.js";
const __pageData = JSON.parse('{"title":"SDK & Contract Repository Configuration Sync","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Configuration_Sync.md","filePath":"guide/Configuration_Sync.md","lastUpdated":1768813029000}');
const _sfc_main = { name: "guide/Configuration_Sync.md" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [..._cache[0] || (_cache[0] = [
    createStaticVNode('<h1 id="sdk-contract-repository-configuration-sync" tabindex="-1">SDK &amp; Contract Repository Configuration Sync <a class="header-anchor" href="#sdk-contract-repository-configuration-sync" aria-label="Permalink to &quot;SDK &amp; Contract Repository Configuration Sync&quot;">​</a></h1><p>This document outlines the synchronization mechanism between the <code>SuperPaymaster</code> (Contracts) repository and the <code>aastar-sdk</code>.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The SDK relies on two artifacts from the contract repository:</p><ol><li><strong>ABIs</strong>: JSON files defining the contract interfaces.</li><li><strong>Configuration</strong>: JSON files defining deployed contract addresses and source code verification hashes.</li></ol><h2 id="sync-workflow" tabindex="-1">Sync Workflow <a class="header-anchor" href="#sync-workflow" aria-label="Permalink to &quot;Sync Workflow&quot;">​</a></h2><p>The synchronization is automated via the <code>run_sdk_complete_regression.sh</code> script (and standalone <code>sync_to_sdk.sh</code> in SuperPaymaster).</p><h3 id="_1-artifact-generation-superpaymaster-side" tabindex="-1">1. Artifact Generation (SuperPaymaster Side) <a class="header-anchor" href="#_1-artifact-generation-superpaymaster-side" aria-label="Permalink to &quot;1. Artifact Generation (SuperPaymaster Side)&quot;">​</a></h3><ul><li><strong>ABIs</strong>: <code>forge build</code> generates artifacts. <code>extract_v3_abis.sh</code> extracts verified ABIs to <code>abis/*.json</code>.</li><li><strong>Config</strong>: Deployment scripts (e.g., <code>DeployAnvil.s.sol</code>) generate <code>deployments/config.{network}.json</code>. This file includes: <ul><li>Contract Addresses (Registry, SuperPaymaster, etc.)</li><li><code>srcHash</code>: SHA-256 hash of the <code>contracts/src</code> directory for integrity checks.</li></ul></li></ul><h3 id="_2-synchronization-bridge" tabindex="-1">2. Synchronization Bridge <a class="header-anchor" href="#_2-synchronization-bridge" aria-label="Permalink to &quot;2. Synchronization Bridge&quot;">​</a></h3><p>Artifacts are copied to the SDK:</p><ul><li><code>abis/*.json</code> -&gt; <code>packages/core/src/abis/</code></li><li><code>deployments/config.{network}.json</code> -&gt; <code>config.{network}.json</code> (SDK Root)</li></ul><h3 id="_3-sdk-abstraction-layer-constants-ts" tabindex="-1">3. SDK Abstraction Layer (<code>constants.ts</code>) <a class="header-anchor" href="#_3-sdk-abstraction-layer-constants-ts" aria-label="Permalink to &quot;3. SDK Abstraction Layer (`constants.ts`)&quot;">​</a></h3><p>The SDK avoids hardcoding addresses or reading JSON files directly in business logic.</p><ul><li><strong>File</strong>: <code>packages/core/src/constants.ts</code></li><li><strong>Mechanism</strong>: <ul><li>Reads <code>process.env.NETWORK</code> (default: &#39;anvil&#39;).</li><li>Dynamically loads <code>config.{network}.json</code>.</li><li>Exports constants like <code>REGISTRY_ADDRESS</code>, <code>SUPER_PAYMASTER_ADDRESS</code>.</li></ul></li><li><strong>Legacy Support</strong>: <code>contract-addresses.ts</code> has been refactored to consume <code>constants.ts</code>, ensuring backward compatibility.</li></ul><h2 id="verification-verify-onchain-milestone-ts" tabindex="-1">Verification (<code>verify_onchain_milestone.ts</code>) <a class="header-anchor" href="#verification-verify-onchain-milestone-ts" aria-label="Permalink to &quot;Verification (`verify_onchain_milestone.ts`)&quot;">​</a></h2><p>A verification script (<code>scripts/verify_onchain_milestone.ts</code>) ensures the SDK is in sync with the chain:</p><ol><li>Loads <code>config.{network}.json</code> via <code>constants.ts</code>.</li><li>Verifies <code>srcHash</code> existence.</li><li>Checks on-chain code presence for all critical contracts using <code>viem</code>.</li></ol><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>To run the full regression with sync and verification:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./run_sdk_complete_regression.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anvil</span></span></code></pre></div>', 21)
  ])]);
}
const Configuration_Sync = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  Configuration_Sync as default
};
