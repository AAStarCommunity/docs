import{_ as e,c as l,o as a,ag as i}from"./chunks/framework.dvv-DFtf.js";const g=JSON.parse('{"title":"SuperPaymaster 实验任务分解 (Task Breakdown)","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/task_breakdown.md","filePath":"zh/guide/task_breakdown.md"}'),r={name:"zh/guide/task_breakdown.md"};function s(o,t,d,n,c,h){return a(),l("div",null,[...t[0]||(t[0]=[i('<h1 id="superpaymaster-实验任务分解-task-breakdown" tabindex="-1">SuperPaymaster 实验任务分解 (Task Breakdown) <a class="header-anchor" href="#superpaymaster-实验任务分解-task-breakdown" aria-label="Permalink to &quot;SuperPaymaster 实验任务分解 (Task Breakdown)&quot;">​</a></h1><p>基于博士研究需求和“三步走”（准备、测试、分析）策略。</p><h2 id="阶段-0-基础与配置" tabindex="-1">阶段 0: 基础与配置 <a class="header-anchor" href="#阶段-0-基础与配置" aria-label="Permalink to &quot;阶段 0: 基础与配置&quot;">​</a></h2><ul><li><p>[x] <strong>0.1. 环境设置 (<code>.env.v3</code>)</strong></p><ul><li>[x] 创建 <code>projects/env/.env.v3</code>。</li><li>[x] 填充 RPC 变量 (<code>SEPOLIA_RPC_URL</code> 等)。</li><li>[x] 填充账户私钥。</li><li>[x] 配置合约地址（优先使用 <code>@aastar/shared-config</code>）。</li></ul></li><li><p>[x] <strong>0.2. SDK 架构优化</strong></p><ul><li>[x] 验证 <code>@aastar/shared-config</code> 的集成。</li><li>[x] 确保 <code>@aastar/core</code> 导出适配各网络的客户端。</li></ul></li></ul><h2 id="阶段-1-准备-储备-弹药" tabindex="-1">阶段 1: 准备 (储备“弹药”) <a class="header-anchor" href="#阶段-1-准备-储备-弹药" aria-label="Permalink to &quot;阶段 1: 准备 (储备“弹药”)&quot;">​</a></h2><ul><li>[x] <strong>1.1. 自动化准备 (<code>scripts/01_prepare_all.ts</code>)</strong><ul><li>[x] <strong>统一脚本</strong>: 运行以下所有检查。</li><li>[x] <strong>账户检查</strong>: 计算 A、B、C 账户地址。</li><li>[x] <strong>ETH 检查</strong>: 余额不足时从 Supplier 节点注资。</li><li>[x] <strong>身份检查</strong>: 检查 C 账户 MySBT 余额，缺失时自动铸造。</li><li>[x] <strong>资产检查</strong>: 检查 C 账户 xPNTs (GToken) 余额，不足时自动转账。</li></ul></li></ul><h2 id="阶段-2-测试-执行阶段" tabindex="-1">阶段 2: 测试 (执行阶段) <a class="header-anchor" href="#阶段-2-测试-执行阶段" aria-label="Permalink to &quot;阶段 2: 测试 (执行阶段)&quot;">​</a></h2><ol><li>在 Sepolia, OP Sepolia 和 OP Mainnet 进行 ERC20 转账测试。</li><li>每小时随机进行 2 次转账，24 小时共 48 次。</li><li>默认使用 Alchemy Bundler RPC。</li><li>在 Pimlico Paymaster 测试中使用 PIM 作为 ERC20 Gas 代币。</li><li>使用 <code>run_daily_experiment.ts</code> 编排所有脚本。</li></ol><ul><li><p>[/] <strong>2.1. 基准 1: EOA 转账 (<code>scripts/02_test_eoa.ts</code>)</strong></p><ul><li>[ ] 使用 <code>PRIVATE_KEY_RELAYER</code> 作为测试 EOA。</li><li>[ ] 记录各项指标。</li></ul></li><li><p>[ ] <strong>2.2. 基准 2: 标准 AA (<code>scripts/03_test_standard_aa.ts</code>)</strong></p><ul><li>[ ] 使用 <code>TEST_SIMPLE_ACCOUNT_A</code> + Pimlico Paymaster。</li><li>[ ] 记录各项指标。</li></ul></li><li><p>[ ] <strong>2.3. 实验组: SuperPaymaster (<code>scripts/04_test_superpaymaster.ts</code>)</strong><em>博士论文贡献的核心。</em></p><ul><li>[ ] 使用 <code>TEST_SIMPLE_ACCOUNT_C</code> + AAStar SuperPaymaster。</li><li>[ ] 构造 UserOp 并发送给 Bundler。</li><li>[ ] 记录指标 (Gas Used, L1 Fee, Time)。</li></ul></li></ul><h2 id="阶段-3-分析-结果产出" tabindex="-1">阶段 3: 分析 (结果产出) <a class="header-anchor" href="#阶段-3-分析-结果产出" aria-label="Permalink to &quot;阶段 3: 分析 (结果产出)&quot;">​</a></h2><ul><li>[ ] <strong>3.1. 数据分析 (<code>scripts/05_analyze_data.ts</code>)</strong><ul><li>[ ] 读取 CSV 结果。</li><li>[ ] 计算均值与标准差。</li><li>[ ] 对比成本与耗时。</li><li>[ ] 生成用于论文的 Markdown 表格。</li></ul></li></ul><h2 id="阶段-4-特性验证与联动测试" tabindex="-1">阶段 4: 特性验证与联动测试 [/] <a class="header-anchor" href="#阶段-4-特性验证与联动测试" aria-label="Permalink to &quot;阶段 4: 特性验证与联动测试 [/]&quot;">​</a></h2><h3 id="阶段-5-staking-退出与-slash-测试-12-ts" tabindex="-1">阶段 5: Staking 退出与 Slash 测试 (12_*.ts) <a class="header-anchor" href="#阶段-5-staking-退出与-slash-测试-12-ts" aria-label="Permalink to &quot;阶段 5: Staking 退出与 Slash 测试 (12_*.ts)&quot;">​</a></h3><ul><li>[ ] unlock → withdraw 正常流程</li><li>[ ] Slash 参数验证（罚没、国库、退款）</li><li>[ ] 时间锁测试（提前退出拒绝）</li></ul><h3 id="阶段-6-mysbt-销毁与联动集成" tabindex="-1">阶段 6: MySBT 销毁与联动集成 <a class="header-anchor" href="#阶段-6-mysbt-销毁与联动集成" aria-label="Permalink to &quot;阶段 6: MySBT 销毁与联动集成&quot;">​</a></h3><ul><li>[ ] 实现 Registry.exitRole 与 MySBT 销毁联动</li><li>[ ] 确保角色退出后成员资格失效</li></ul><h2 id="附录-账户角色与私钥" tabindex="-1">附录: 账户角色与私钥 <a class="header-anchor" href="#附录-账户角色与私钥" aria-label="Permalink to &quot;附录: 账户角色与私钥&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">角色</th><th style="text-align:left;">变量名称</th><th style="text-align:left;">用途</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Supplier</strong></td><td style="text-align:left;"><code>SUPPLIER_KEY</code></td><td style="text-align:left;">持有测试 ETH 和 GTokens，负责注资</td></tr><tr><td style="text-align:left;"><strong>Operator</strong></td><td style="text-align:left;"><code>OPERATOR_JASON_KEY</code></td><td style="text-align:left;">管理员，负责铸造 SBT</td></tr><tr><td style="text-align:left;"><strong>Relayer</strong></td><td style="text-align:left;"><code>RELAYER_KEY</code></td><td style="text-align:left;">执行 EOA 基准测试</td></tr><tr><td style="text-align:left;"><strong>AA User 1</strong></td><td style="text-align:left;"><code>OWNER_JASON_KEY</code></td><td style="text-align:left;">控制 SuperPaymaster AA 账户</td></tr><tr><td style="text-align:left;"><strong>AA User 2</strong></td><td style="text-align:left;"><code>OWNER_ANNI_KEY</code></td><td style="text-align:left;">控制标准 Paymaster AA 账户</td></tr></tbody></table>',18)])])}const _=e(r,[["render",s]]);export{g as __pageData,_ as default};
