import { _ as _export_sfc, c as createElementBlock, o as openBlock, ag as createStaticVNode } from "./chunks/framework.vWx6JuJ5.js";
const __pageData = JSON.parse('{"title":"SuperPaymaster (AOA+)","description":"","frontmatter":{},"headers":[],"relativePath":"guide/concepts/superpaymaster.md","filePath":"guide/concepts/superpaymaster.md"}');
const _sfc_main = { name: "guide/concepts/superpaymaster.md" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [..._cache[0] || (_cache[0] = [
    createStaticVNode('<h1 id="superpaymaster-aoa" tabindex="-1">SuperPaymaster (AOA+) <a class="header-anchor" href="#superpaymaster-aoa" aria-label="Permalink to &quot;SuperPaymaster (AOA+)&quot;">​</a></h1><p>Advanced On-chain Accounting Paymaster with credit system.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>SuperPaymaster is AAStar&#39;s innovative gas sponsorship solution that enables truly gasless transactions through an on-chain credit system.</p><h2 id="key-features" tabindex="-1">Key Features <a class="header-anchor" href="#key-features" aria-label="Permalink to &quot;Key Features&quot;">​</a></h2><h3 id="_1-credit-based-system" tabindex="-1">1. Credit-Based System <a class="header-anchor" href="#_1-credit-based-system" aria-label="Permalink to &quot;1. Credit-Based System&quot;">​</a></h3><p>Users get gas credit based on:</p><ul><li><strong>SBT Ownership</strong>: Community membership tokens</li><li><strong>Reputation Score</strong>: On-chain reputation</li><li><strong>Historical Behavior</strong>: Past transaction patterns</li><li><strong>Community Rules</strong>: Custom eligibility criteria</li></ul><h3 id="_2-operator-network" tabindex="-1">2. Operator Network <a class="header-anchor" href="#_2-operator-network" aria-label="Permalink to &quot;2. Operator Network&quot;">​</a></h3><p>Decentralized network of Paymaster operators who:</p><ul><li>Stake GTokens to participate</li><li>Deposit funds for gas sponsorship</li><li>Earn fees from communities</li><li>Get slashed for misbehavior</li></ul><h3 id="_3-community-governance" tabindex="-1">3. Community Governance <a class="header-anchor" href="#_3-community-governance" aria-label="Permalink to &quot;3. Community Governance&quot;">​</a></h3><p>Communities can:</p><ul><li>Set their own eligibility rules</li><li>Configure credit limits</li><li>Manage operator selection</li><li>Customize fee structures</li></ul><h2 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User-&gt;&gt;SuperPaymaster: Request gasless tx</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SuperPaymaster-&gt;&gt;Registry: Check eligibility</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Registry-&gt;&gt;SuperPaymaster: Return credit limit</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SuperPaymaster-&gt;&gt;Operator: Sponsor gas</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Operator-&gt;&gt;EntryPoint: Pay gas</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    EntryPoint-&gt;&gt;User: Execute transaction</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    User-&gt;&gt;SuperPaymaster: Repay debt (later)</span></span></code></pre></div><h2 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h2><h3 id="components" tabindex="-1">Components <a class="header-anchor" href="#components" aria-label="Permalink to &quot;Components&quot;">​</a></h3><ol><li><strong>SuperPaymaster Contract</strong>: Core logic for gas sponsorship</li><li><strong>Registry</strong>: Manages communities, operators, and users</li><li><strong>GTokenStaking</strong>: Operator stake management</li><li><strong>ReputationSystem</strong>: On-chain reputation tracking</li></ol><h3 id="credit-calculation" tabindex="-1">Credit Calculation <a class="header-anchor" href="#credit-calculation" aria-label="Permalink to &quot;Credit Calculation&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">credit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baseCreditLimit </span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reputationMultiplier </span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> communityBonus </span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> outstandingDebt</span></span></code></pre></div><h2 id="usage-example" tabindex="-1">Usage Example <a class="header-anchor" href="#usage-example" aria-label="Permalink to &quot;Usage Example&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createEndUserClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getPaymasterAndData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/paymaster&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. Check eligibility</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createEndUserClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eligible</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkEligibility</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(communityAddress);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">eligible) {</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Not eligible for gasless transactions&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. Get credit limit</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> creditLimit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCreditLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Available credit:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(creditLimit));</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. Create UserOperation with paymaster data</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> paymasterAndData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPaymasterAndData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userOp, {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  paymasterAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CONTRACTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sepolia.superPaymaster,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  communityAddress,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xPNTsAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CONTRACTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.sepolia.xPNTsToken,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  verificationGasLimit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  postOpGasLimit: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4. Submit gasless transaction</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> txHash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> submitUserOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userOp,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  paymasterAndData,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="benefits" tabindex="-1">Benefits <a class="header-anchor" href="#benefits" aria-label="Permalink to &quot;Benefits&quot;">​</a></h2><h3 id="for-users" tabindex="-1">For Users <a class="header-anchor" href="#for-users" aria-label="Permalink to &quot;For Users&quot;">​</a></h3><ul><li>✅ No need to hold ETH for gas</li><li>✅ Seamless transaction experience</li><li>✅ Credit-based system (pay later)</li><li>✅ Community-specific benefits</li></ul><h3 id="for-communities" tabindex="-1">For Communities <a class="header-anchor" href="#for-communities" aria-label="Permalink to &quot;For Communities&quot;">​</a></h3><ul><li>✅ Attract more users</li><li>✅ Customizable rules</li><li>✅ Better user retention</li><li>✅ Governance control</li></ul><h3 id="for-operators" tabindex="-1">For Operators <a class="header-anchor" href="#for-operators" aria-label="Permalink to &quot;For Operators&quot;">​</a></h3><ul><li>✅ Earn fees from gas sponsorship</li><li>✅ Decentralized network</li><li>✅ Stake-based participation</li><li>✅ Performance incentives</li></ul><h2 id="comparison-with-traditional-paymasters" tabindex="-1">Comparison with Traditional Paymasters <a class="header-anchor" href="#comparison-with-traditional-paymasters" aria-label="Permalink to &quot;Comparison with Traditional Paymasters&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>Traditional Paymaster</th><th>SuperPaymaster (AOA+)</th></tr></thead><tbody><tr><td>Gas Sponsorship</td><td>✅</td><td>✅</td></tr><tr><td>Credit System</td><td>❌</td><td>✅</td></tr><tr><td>Decentralized</td><td>❌</td><td>✅</td></tr><tr><td>Community Governance</td><td>❌</td><td>✅</td></tr><tr><td>Reputation-Based</td><td>❌</td><td>✅</td></tr><tr><td>Operator Network</td><td>❌</td><td>✅</td></tr></tbody></table><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">​</a></h2><ul><li><a href="/api/roles/operator.html">Operator API</a> - Become an operator</li><li><a href="/api/roles/community.html">Community API</a> - Set up gas sponsorship</li><li><a href="/api/roles/enduser.html">End User API</a> - Use gasless transactions</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="/guide/concepts/rainbow-bridge.html">EOA Rainbow Bridge</a></li><li><a href="/guide/concepts/reputation.html">Reputation System</a></li><li><a href="/guide/quick-start.html">Quick Start</a></li></ul>', 36)
  ])]);
}
const superpaymaster = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  superpaymaster as default
};
