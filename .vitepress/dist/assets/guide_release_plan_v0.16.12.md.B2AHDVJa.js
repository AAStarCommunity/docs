import{_ as e,c as l,o as a,ag as o}from"./chunks/framework.dvv-DFtf.js";const h=JSON.parse('{"title":"Release Plan v0.16.12: NPM Publishing Fixes","description":"","frontmatter":{},"headers":[],"relativePath":"guide/release_plan_v0.16.12.md","filePath":"guide/release_plan_v0.16.12.md","lastUpdated":1768813029000}'),s={name:"guide/release_plan_v0.16.12.md"};function d(i,t,r,n,c,g){return a(),l("div",null,[...t[0]||(t[0]=[o('<h1 id="release-plan-v0-16-12-npm-publishing-fixes" tabindex="-1">Release Plan v0.16.12: NPM Publishing Fixes <a class="header-anchor" href="#release-plan-v0-16-12-npm-publishing-fixes" aria-label="Permalink to &quot;Release Plan v0.16.12: NPM Publishing Fixes&quot;">​</a></h1><h2 id="_1-overview" tabindex="-1">1. Overview <a class="header-anchor" href="#_1-overview" aria-label="Permalink to &quot;1. Overview&quot;">​</a></h2><p>This plan addresses the issues encountered during the v0.16.11 release, specifically the accidental publishing of the root repository files and the inclusion of unnecessary development files (tests, <code>node_modules</code>) in certain packages.</p><h2 id="_2-package-structure-strategy" tabindex="-1">2. Package Structure &amp; Strategy <a class="header-anchor" href="#_2-package-structure-strategy" aria-label="Permalink to &quot;2. Package Structure &amp; Strategy&quot;">​</a></h2><p>We follow a <strong>Monorepo</strong> structure where:</p><ol><li><strong>Root (<code>@aastar/monorepo</code>)</strong>: The development workspace. <strong>PRIVATE</strong>. Never published.</li><li><strong>Umbrella (<code>@aastar/sdk</code>)</strong>: The main entry point for users. Installs all other packages as dependencies.</li><li><strong>Modules (<code>@aastar/core</code>, etc.)</strong>: Individual functional units. Can be installed separately if needed.</li></ol><h3 id="why-this-strategy" tabindex="-1">Why this strategy? <a class="header-anchor" href="#why-this-strategy" aria-label="Permalink to &quot;Why this strategy?&quot;">​</a></h3><ul><li><strong>Developer Experience</strong>: Users only need to install <code>@aastar/sdk</code> to get everything.</li><li><strong>Modularity</strong>: Advanced users can pick and choose (e.g., only <code>@aastar/paymaster</code>).</li><li><strong>Efficiency</strong>: Shared logic (like <code>@aastar/core</code>) is reused without duplication.</li></ul><h2 id="_3-current-issues-proposed-fixes" tabindex="-1">3. Current Issues &amp; Proposed Fixes <a class="header-anchor" href="#_3-current-issues-proposed-fixes" aria-label="Permalink to &quot;3. Current Issues &amp; Proposed Fixes&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Package</th><th style="text-align:left;">Status</th><th style="text-align:left;">Issue</th><th style="text-align:left;">Proposed Fix</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>ROOT</strong></td><td style="text-align:left;">❌ <strong>CRITICAL</strong></td><td style="text-align:left;">Named <code>@aastar/sdk</code>, <code>private: false</code>. Publishes entire repo!</td><td style="text-align:left;">Rename to <code>@aastar/monorepo</code>, set <code>private: true</code>.</td></tr><tr><td style="text-align:left;"><code>@aastar/sdk</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly configured as public umbrella.</td><td style="text-align:left;">No change (ensure <code>files: [&quot;dist&quot;]</code>).</td></tr><tr><td style="text-align:left;"><code>@aastar/core</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">No change.</td></tr><tr><td style="text-align:left;"><code>@aastar/tokens</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">Fix <code>tsconfig</code> to prevent deep nesting (optional polish).</td></tr><tr><td style="text-align:left;"><code>@aastar/community</code></td><td style="text-align:left;">❌ Bloated</td><td style="text-align:left;">Missing <code>files</code> whitelist. Publishes src/tests.</td><td style="text-align:left;">Add <code>&quot;files&quot;: [&quot;dist&quot;]</code>.</td></tr><tr><td style="text-align:left;"><code>@aastar/operator</code></td><td style="text-align:left;">❌ Bloated</td><td style="text-align:left;">Missing <code>files</code> whitelist.</td><td style="text-align:left;">Add <code>&quot;files&quot;: [&quot;dist&quot;]</code>.</td></tr><tr><td style="text-align:left;"><code>@aastar/analytics</code></td><td style="text-align:left;">❌ Bloated</td><td style="text-align:left;">Missing <code>files</code> whitelist.</td><td style="text-align:left;">Add <code>&quot;files&quot;: [&quot;dist&quot;]</code>.</td></tr><tr><td style="text-align:left;"><code>@aastar/enduser</code></td><td style="text-align:left;">❌ Bloated</td><td style="text-align:left;">Missing <code>files</code> whitelist.</td><td style="text-align:left;">Add <code>&quot;files&quot;: [&quot;dist&quot;]</code>.</td></tr><tr><td style="text-align:left;"><code>@aastar/paymaster</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">No change.</td></tr><tr><td style="text-align:left;"><code>@aastar/account</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">No change.</td></tr><tr><td style="text-align:left;"><code>@aastar/dapp</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">No change.</td></tr><tr><td style="text-align:left;"><code>@aastar/identity</code></td><td style="text-align:left;">✅ OK</td><td style="text-align:left;">Correctly whitelist <code>dist</code>.</td><td style="text-align:left;">No change.</td></tr></tbody></table><h2 id="_4-execution-plan" tabindex="-1">4. Execution Plan <a class="header-anchor" href="#_4-execution-plan" aria-label="Permalink to &quot;4. Execution Plan&quot;">​</a></h2><ol><li><strong>Root Fix</strong>: Rename <code>package.json</code> -&gt; <code>@aastar/monorepo</code>, <code>private: true</code>.</li><li><strong>Cleanup</strong>: Add <code>&quot;files&quot;: [&quot;dist&quot;]</code> to <code>community</code>, <code>operator</code>, <code>analytics</code>, <code>enduser</code> package.jsons.</li><li><strong>Version Bump</strong>: Update all packages to <code>0.16.12</code> using <code>update-version.sh</code>.</li><li><strong>Verify</strong>: Dry-run publish or inspect tarball content.</li><li><strong>Publish</strong>: execute <code>pnpm publish -r --no-git-checks --access public</code>.</li></ol><h2 id="_5-benefits" tabindex="-1">5. Benefits <a class="header-anchor" href="#_5-benefits" aria-label="Permalink to &quot;5. Benefits&quot;">​</a></h2><ul><li><strong>Fixes &quot;Root Publish&quot;</strong>: Prevents the root folder (with all scripts and config) from overwriting <code>@aastar/sdk</code> on NPM.</li><li><strong>Small Install Size</strong>: Users only download compiled JS/DTS files, not your tests or source code.</li><li><strong>Professional</strong>: Clean packages without <code>node_modules</code> or <code>.test.ts</code> garbage.</li></ul><h2 id="_6-user-action" tabindex="-1">6. User Action <a class="header-anchor" href="#_6-user-action" aria-label="Permalink to &quot;6. User Action&quot;">​</a></h2><p>Please review and confirm this plan. Upon approval, I will apply the fixes and perform the formatting.</p>',16)])])}const f=e(s,[["render",d]]);export{h as __pageData,f as default};
