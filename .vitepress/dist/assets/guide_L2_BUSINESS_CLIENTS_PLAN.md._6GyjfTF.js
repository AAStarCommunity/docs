import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.dvv-DFtf.js";const o=JSON.parse('{"title":"L2 Business Clients å¼€å‘è®¡åˆ’","description":"","frontmatter":{},"headers":[],"relativePath":"guide/L2_BUSINESS_CLIENTS_PLAN.md","filePath":"guide/L2_BUSINESS_CLIENTS_PLAN.md","lastUpdated":1768813029000}'),e={name:"guide/L2_BUSINESS_CLIENTS_PLAN.md"};function t(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="l2-business-clients-å¼€å‘è®¡åˆ’" tabindex="-1">L2 Business Clients å¼€å‘è®¡åˆ’ <a class="header-anchor" href="#l2-business-clients-å¼€å‘è®¡åˆ’" aria-label="Permalink to &quot;L2 Business Clients å¼€å‘è®¡åˆ’&quot;">â€‹</a></h1><h2 id="ğŸ¯-l2-å±‚ç›®æ ‡" tabindex="-1">ğŸ¯ L2 å±‚ç›®æ ‡ <a class="header-anchor" href="#ğŸ¯-l2-å±‚ç›®æ ‡" aria-label="Permalink to &quot;ğŸ¯ L2 å±‚ç›®æ ‡&quot;">â€‹</a></h2><p>åŸºäºå®Œæ•´çš„ L1 Core Actionsï¼Œæ„å»º<strong>è§’è‰²å¯¼å‘</strong>çš„é«˜å±‚ä¸šåŠ¡å®¢æˆ·ç«¯ï¼Œå°è£…ç«¯åˆ°ç«¯ä¸šåŠ¡é€»è¾‘ã€‚</p><hr><h2 id="ğŸ“‹-l2-æ¶æ„è®¾è®¡" tabindex="-1">ğŸ“‹ L2 æ¶æ„è®¾è®¡ <a class="header-anchor" href="#ğŸ“‹-l2-æ¶æ„è®¾è®¡" aria-label="Permalink to &quot;ğŸ“‹ L2 æ¶æ„è®¾è®¡&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒåŸåˆ™" tabindex="-1">æ ¸å¿ƒåŸåˆ™ <a class="header-anchor" href="#æ ¸å¿ƒåŸåˆ™" aria-label="Permalink to &quot;æ ¸å¿ƒåŸåˆ™&quot;">â€‹</a></h3><ol><li><strong>è§’è‰²å¯¼å‘</strong> - æŒ‰ç”¨æˆ·è§’è‰²åˆ’åˆ† Client</li><li><strong>ä¸šåŠ¡å®Œæ•´</strong> - å°è£…å®Œæ•´ä¸šåŠ¡æµç¨‹</li><li><strong>ç®€åŒ–æ¥å£</strong> - éšè—åº•å±‚å¤æ‚æ€§</li><li><strong>ç»„åˆ L1</strong> - å¤ç”¨æ‰€æœ‰ L1 actions</li></ol><h3 id="å››å¤§è§’è‰²-client" tabindex="-1">å››å¤§è§’è‰² Client <a class="header-anchor" href="#å››å¤§è§’è‰²-client" aria-label="Permalink to &quot;å››å¤§è§’è‰² Client&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>L2 Business Clients</span></span>
<span class="line"><span>â”œâ”€â”€ CommunityClient      - ç¤¾åŒºç®¡ç†è€…</span></span>
<span class="line"><span>â”œâ”€â”€ PaymasterOperatorClient  - Paymaster è¿è¥å•†</span></span>
<span class="line"><span>â”œâ”€â”€ UserClient           - ç»ˆç«¯ç”¨æˆ·</span></span>
<span class="line"><span>â””â”€â”€ DAOClient            - DAO æ²»ç†è€…</span></span></code></pre></div><hr><h2 id="_1ï¸âƒ£-communityclient-ç¤¾åŒºç®¡ç†è€…" tabindex="-1">1ï¸âƒ£ CommunityClient - ç¤¾åŒºç®¡ç†è€… <a class="header-anchor" href="#_1ï¸âƒ£-communityclient-ç¤¾åŒºç®¡ç†è€…" aria-label="Permalink to &quot;1ï¸âƒ£ CommunityClient - ç¤¾åŒºç®¡ç†è€…&quot;">â€‹</a></h2><h3 id="ç›®æ ‡ç”¨æˆ·" tabindex="-1">ç›®æ ‡ç”¨æˆ· <a class="header-anchor" href="#ç›®æ ‡ç”¨æˆ·" aria-label="Permalink to &quot;ç›®æ ‡ç”¨æˆ·&quot;">â€‹</a></h3><p>ç¤¾åŒºåˆ›å»ºè€…å’Œç®¡ç†å‘˜</p><h3 id="æ ¸å¿ƒåŠŸèƒ½" tabindex="-1">æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½" aria-label="Permalink to &quot;æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><h4 id="_1-1-ç¤¾åŒºåˆ›å»ºä¸é…ç½®" tabindex="-1">1.1 ç¤¾åŒºåˆ›å»ºä¸é…ç½® <a class="header-anchor" href="#_1-1-ç¤¾åŒºåˆ›å»ºä¸é…ç½®" aria-label="Permalink to &quot;1.1 ç¤¾åŒºåˆ›å»ºä¸é…ç½®&quot;">â€‹</a></h4><ul><li><code>createCommunity(name, ensName)</code> - åˆ›å»ºç¤¾åŒºå¹¶æ³¨å†Œ</li><li><code>deployCommunityToken(name, symbol)</code> - éƒ¨ç½²ç¤¾åŒºä»£å¸ï¼ˆxPNTsï¼‰</li><li><code>configureCommunity(config)</code> - é…ç½®ç¤¾åŒºå‚æ•°</li></ul><h4 id="_1-2-æˆå‘˜ç®¡ç†" tabindex="-1">1.2 æˆå‘˜ç®¡ç† <a class="header-anchor" href="#_1-2-æˆå‘˜ç®¡ç†" aria-label="Permalink to &quot;1.2 æˆå‘˜ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>getMemberships()</code> - è·å–æ‰€æœ‰æˆå‘˜</li><li><code>getActiveMemberships()</code> - è·å–æ´»è·ƒæˆå‘˜</li><li><code>verifyCommunityMembership(user)</code> - éªŒè¯æˆå‘˜èµ„æ ¼</li><li><code>airdropSBT(users, metadata)</code> - æ‰¹é‡ç©ºæŠ• SBT</li></ul><h4 id="_1-3-è§’è‰²ç®¡ç†" tabindex="-1">1.3 è§’è‰²ç®¡ç† <a class="header-anchor" href="#_1-3-è§’è‰²ç®¡ç†" aria-label="Permalink to &quot;1.3 è§’è‰²ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>createRole(name, config)</code> - åˆ›å»ºè‡ªå®šä¹‰è§’è‰²</li><li><code>configureRole(roleId, config)</code> - é…ç½®è§’è‰²å‚æ•°</li><li><code>assignRole(user, roleId)</code> - åˆ†é…è§’è‰²</li><li><code>revokeRole(user, roleId)</code> - æ’¤é”€è§’è‰²</li></ul><h4 id="_1-4-ä¿¡èª‰ç³»ç»Ÿ" tabindex="-1">1.4 ä¿¡èª‰ç³»ç»Ÿ <a class="header-anchor" href="#_1-4-ä¿¡èª‰ç³»ç»Ÿ" aria-label="Permalink to &quot;1.4 ä¿¡èª‰ç³»ç»Ÿ&quot;">â€‹</a></h4><ul><li><code>setReputationRule(ruleId, rule)</code> - è®¾ç½®ä¿¡èª‰è§„åˆ™</li><li><code>computeMemberScore(user)</code> - è®¡ç®—æˆå‘˜ç§¯åˆ†</li><li><code>getCommunityRanking()</code> - è·å–æ’è¡Œæ¦œ</li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { CommunityClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/enduser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> community</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommunityClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  registryAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">REGISTRY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sbtAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MYSBT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  factoryAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">XPNTS_FACTORY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client: walletClient,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºç¤¾åŒº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">communityAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tokenAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> community.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createCommunity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Web3 Builders&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ensName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;web3builders.eth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tokenSymbol: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;W3B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç©ºæŠ• SBT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> community.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">airdropSBT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  users: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0x...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0x...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  metadata: { tier: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;founder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®ä¿¡èª‰è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> community.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setReputationRule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ruleId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0x01&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rule: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    activityWeight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    contributionWeight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><hr><h2 id="_2ï¸âƒ£-paymasteroperatorclient-paymaster-è¿è¥å•†" tabindex="-1">2ï¸âƒ£ PaymasterOperatorClient - Paymaster è¿è¥å•† <a class="header-anchor" href="#_2ï¸âƒ£-paymasteroperatorclient-paymaster-è¿è¥å•†" aria-label="Permalink to &quot;2ï¸âƒ£ PaymasterOperatorClient - Paymaster è¿è¥å•†&quot;">â€‹</a></h2><h3 id="ç›®æ ‡ç”¨æˆ·-1" tabindex="-1">ç›®æ ‡ç”¨æˆ· <a class="header-anchor" href="#ç›®æ ‡ç”¨æˆ·-1" aria-label="Permalink to &quot;ç›®æ ‡ç”¨æˆ·&quot;">â€‹</a></h3><p>Paymaster è¿è¥å•†ï¼ˆèµåŠ©äº¤æ˜“çš„æœåŠ¡æä¾›è€…ï¼‰</p><h3 id="æ ¸å¿ƒåŠŸèƒ½-1" tabindex="-1">æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½-1" aria-label="Permalink to &quot;æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><h4 id="_2-1-è¿è¥å•†æ³¨å†Œä¸é…ç½®" tabindex="-1">2.1 è¿è¥å•†æ³¨å†Œä¸é…ç½® <a class="header-anchor" href="#_2-1-è¿è¥å•†æ³¨å†Œä¸é…ç½®" aria-label="Permalink to &quot;2.1 è¿è¥å•†æ³¨å†Œä¸é…ç½®&quot;">â€‹</a></h4><ul><li><code>registerAsOperator()</code> - æ³¨å†Œä¸º Paymaster è¿è¥å•†</li><li><code>configureOperator(config)</code> - é…ç½®è¿è¥å‚æ•°</li><li><code>deployPaymaster(owner)</code> - éƒ¨ç½²è‡ªå·±çš„ Paymaster</li></ul><h4 id="_2-2-èµ„é‡‘ç®¡ç†" tabindex="-1">2.2 èµ„é‡‘ç®¡ç† <a class="header-anchor" href="#_2-2-èµ„é‡‘ç®¡ç†" aria-label="Permalink to &quot;2.2 èµ„é‡‘ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>deposit(amount)</code> - å……å€¼åˆ° SuperPaymaster</li><li><code>withdraw(amount)</code> - æå–èµ„é‡‘</li><li><code>getBalance()</code> - æŸ¥è¯¢ä½™é¢</li><li><code>getAvailableCredit(user)</code> - æŸ¥è¯¢ç”¨æˆ·é¢åº¦</li></ul><h4 id="_2-3-èµåŠ©ç­–ç•¥" tabindex="-1">2.3 èµåŠ©ç­–ç•¥ <a class="header-anchor" href="#_2-3-èµåŠ©ç­–ç•¥" aria-label="Permalink to &quot;2.3 èµåŠ©ç­–ç•¥&quot;">â€‹</a></h4><ul><li><code>setSponsorshipPolicy(policy)</code> - è®¾ç½®èµåŠ©ç­–ç•¥</li><li><code>updateExchangeRate(rate)</code> - æ›´æ–°å…‘æ¢ç‡</li><li><code>setPause(paused)</code> - æš‚åœ/æ¢å¤æœåŠ¡</li><li><code>setOperatorLimits(limits)</code> - è®¾ç½®è¿è¥é™åˆ¶</li></ul><h4 id="_2-4-ç›‘æ§ä¸å®¡è®¡" tabindex="-1">2.4 ç›‘æ§ä¸å®¡è®¡ <a class="header-anchor" href="#_2-4-ç›‘æ§ä¸å®¡è®¡" aria-label="Permalink to &quot;2.4 ç›‘æ§ä¸å®¡è®¡&quot;">â€‹</a></h4><ul><li><code>getOperatorStats()</code> - è·å–è¿è¥ç»Ÿè®¡</li><li><code>getSlashHistory()</code> - æŸ¥è¯¢ Slash å†å²</li><li><code>getReputationScore()</code> - æŸ¥è¯¢ä¿¡èª‰è¯„åˆ†</li><li><code>getRevenueReport()</code> - è·å–æ”¶ç›ŠæŠ¥å‘Š</li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹-1" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹-1" aria-label="Permalink to &quot;ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PaymasterOperatorClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/operator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> operator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymasterOperatorClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  superPaymasterAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUPER_PAYMASTER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  registryAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">REGISTRY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client: walletClient,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œå¹¶é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerAsOperator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configureOperator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xPNTsToken: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TOKEN_ADDRESS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  treasury: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TREASURY_ADDRESS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exchangeRate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 xPNTs = 100 wei</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å……å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deposit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ amount: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;10&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®èµåŠ©ç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSponsorshipPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  maxGasPerOp: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dailyLimit: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseEther</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  whitelistedUsers: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0x...&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘æ§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOperatorStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Today sponsored:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stats.sponsoredCount);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Revenue:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stats.revenue);</span></span></code></pre></div><hr><h2 id="_3ï¸âƒ£-userclient-ç»ˆç«¯ç”¨æˆ·" tabindex="-1">3ï¸âƒ£ UserClient - ç»ˆç«¯ç”¨æˆ· <a class="header-anchor" href="#_3ï¸âƒ£-userclient-ç»ˆç«¯ç”¨æˆ·" aria-label="Permalink to &quot;3ï¸âƒ£ UserClient - ç»ˆç«¯ç”¨æˆ·&quot;">â€‹</a></h2><h3 id="ç›®æ ‡ç”¨æˆ·-2" tabindex="-1">ç›®æ ‡ç”¨æˆ· <a class="header-anchor" href="#ç›®æ ‡ç”¨æˆ·-2" aria-label="Permalink to &quot;ç›®æ ‡ç”¨æˆ·&quot;">â€‹</a></h3><p>æ™®é€šç»ˆç«¯ç”¨æˆ·ï¼ˆä½¿ç”¨ AA è´¦æˆ·çš„ç”¨æˆ·ï¼‰</p><h3 id="æ ¸å¿ƒåŠŸèƒ½-2" tabindex="-1">æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½-2" aria-label="Permalink to &quot;æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><h4 id="_3-1-è´¦æˆ·ç®¡ç†" tabindex="-1">3.1 è´¦æˆ·ç®¡ç† <a class="header-anchor" href="#_3-1-è´¦æˆ·ç®¡ç†" aria-label="Permalink to &quot;3.1 è´¦æˆ·ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>createAccount(owner, salt)</code> - åˆ›å»º AA è´¦æˆ·</li><li><code>getAccountAddress(owner, salt)</code> - é¢„æµ‹è´¦æˆ·åœ°å€</li><li><code>getNonce()</code> - è·å– nonce</li></ul><h4 id="_3-2-sbt-ç®¡ç†" tabindex="-1">3.2 SBT ç®¡ç† <a class="header-anchor" href="#_3-2-sbt-ç®¡ç†" aria-label="Permalink to &quot;3.2 SBT ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>mintSBT(roleId)</code> - é“¸é€  SBT</li><li><code>getMySBTs()</code> - è·å–æˆ‘çš„ SBTs</li><li><code>getMemberships()</code> - è·å–ç¤¾åŒºæˆå‘˜èµ„æ ¼</li><li><code>leaveCommunity(community)</code> - é€€å‡ºç¤¾åŒº</li></ul><h4 id="_3-3-ç§¯åˆ†æ“ä½œ" tabindex="-1">3.3 ç§¯åˆ†æ“ä½œ <a class="header-anchor" href="#_3-3-ç§¯åˆ†æ“ä½œ" aria-label="Permalink to &quot;3.3 ç§¯åˆ†æ“ä½œ&quot;">â€‹</a></h4><ul><li><code>getBalance(token)</code> - æŸ¥è¯¢ä»£å¸ä½™é¢</li><li><code>transfer(to, amount, token)</code> - è½¬è´¦</li><li><code>claimRewards()</code> - é¢†å–å¥–åŠ±</li></ul><h4 id="_3-4-èµåŠ©æ“ä½œ" tabindex="-1">3.4 èµåŠ©æ“ä½œ <a class="header-anchor" href="#_3-4-èµåŠ©æ“ä½œ" aria-label="Permalink to &quot;3.4 èµåŠ©æ“ä½œ&quot;">â€‹</a></h4><ul><li><code>executeWithSponsorship(target, calldata)</code> - ä½¿ç”¨èµåŠ©æ‰§è¡Œæ“ä½œ</li><li><code>batchExecuteWithSponsorship(calls)</code> - æ‰¹é‡æ‰§è¡Œ</li><li><code>getAvailableCredit(operator)</code> - æŸ¥è¯¢å¯ç”¨é¢åº¦</li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹-2" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹-2" aria-label="Permalink to &quot;ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { UserClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/enduser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  accountAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MY_ACCOUNT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  registryAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">REGISTRY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sbtAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MYSBT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  superPaymasterAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUPER_PAYMASTER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client: walletClient,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é“¸é€  SBT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tokenId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mintSBT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  roleId: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ROLE_ENDUSER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¥çœ‹æˆ‘çš„æˆå‘˜èµ„æ ¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> memberships</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMemberships</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;I am member of:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, memberships.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;communities&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨èµåŠ©æ‰§è¡Œæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeWithSponsorship</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  target: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NFT_CONTRACT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  calldata: mintCalldata,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  operator: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OPERATOR_ADDRESS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><hr><h2 id="_4ï¸âƒ£-daoclient-dao-æ²»ç†è€…" tabindex="-1">4ï¸âƒ£ DAOClient - DAO æ²»ç†è€… <a class="header-anchor" href="#_4ï¸âƒ£-daoclient-dao-æ²»ç†è€…" aria-label="Permalink to &quot;4ï¸âƒ£ DAOClient - DAO æ²»ç†è€…&quot;">â€‹</a></h2><h3 id="ç›®æ ‡ç”¨æˆ·-3" tabindex="-1">ç›®æ ‡ç”¨æˆ· <a class="header-anchor" href="#ç›®æ ‡ç”¨æˆ·-3" aria-label="Permalink to &quot;ç›®æ ‡ç”¨æˆ·&quot;">â€‹</a></h3><p>DAO æˆå‘˜ã€ææ¡ˆè€…ã€æŠ•ç¥¨è€…</p><h3 id="æ ¸å¿ƒåŠŸèƒ½-3" tabindex="-1">æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½-3" aria-label="Permalink to &quot;æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><h4 id="_4-1-ææ¡ˆç®¡ç†" tabindex="-1">4.1 ææ¡ˆç®¡ç† <a class="header-anchor" href="#_4-1-ææ¡ˆç®¡ç†" aria-label="Permalink to &quot;4.1 ææ¡ˆç®¡ç†&quot;">â€‹</a></h4><ul><li><code>createProposal(target, calldata, description)</code> - åˆ›å»ºææ¡ˆ</li><li><code>getProposal(proposalId)</code> - æŸ¥è¯¢ææ¡ˆ</li><li><code>getProposalState(proposalId)</code> - è·å–ææ¡ˆçŠ¶æ€</li><li><code>cancelProposal(proposalId)</code> - å–æ¶ˆææ¡ˆ</li></ul><h4 id="_4-2-æŠ•ç¥¨ç®¡ç†" tabindex="-1">4.2 æŠ•ç¥¨ç®¡ç† <a class="header-anchor" href="#_4-2-æŠ•ç¥¨ç®¡ç†" aria-label="Permalink to &quot;4.2 æŠ•ç¥¨ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>signProposal(proposalId)</code> - ç­¾åæ”¯æŒææ¡ˆ</li><li><code>hasVoted(proposalId, validator)</code> - æ£€æŸ¥æ˜¯å¦å·²æŠ•ç¥¨</li><li><code>getSignatureCount(proposalId)</code> - è·å–ç­¾åæ•°</li></ul><h4 id="_4-3-æ‰§è¡Œæ“ä½œ" tabindex="-1">4.3 æ‰§è¡Œæ“ä½œ <a class="header-anchor" href="#_4-3-æ‰§è¡Œæ“ä½œ" aria-label="Permalink to &quot;4.3 æ‰§è¡Œæ“ä½œ&quot;">â€‹</a></h4><ul><li><code>executeWithProof(proposalId, signatures)</code> - æ‰§è¡Œææ¡ˆï¼ˆDVTï¼‰</li><li><code>executeWithBLS(proposalId, blsSignature)</code> - æ‰§è¡Œææ¡ˆï¼ˆBLSï¼‰</li></ul><h4 id="_4-4-éªŒè¯å™¨ç®¡ç†" tabindex="-1">4.4 éªŒè¯å™¨ç®¡ç† <a class="header-anchor" href="#_4-4-éªŒè¯å™¨ç®¡ç†" aria-label="Permalink to &quot;4.4 éªŒè¯å™¨ç®¡ç†&quot;">â€‹</a></h4><ul><li><code>getValidators()</code> - è·å–éªŒè¯å™¨åˆ—è¡¨</li><li><code>addValidator(validator)</code> - æ·»åŠ éªŒè¯å™¨</li><li><code>removeValidator(validator)</code> - ç§»é™¤éªŒè¯å™¨</li><li><code>setThreshold(threshold)</code> - è®¾ç½®é˜ˆå€¼</li></ul><h3 id="ä½¿ç”¨ç¤ºä¾‹-3" tabindex="-1">ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹-3" aria-label="Permalink to &quot;ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { DAOClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@aastar/operator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dao</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DAOClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dvtValidatorAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DVT_VALIDATOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  blsAggregatorAddress: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BLS_AGGREGATOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client: walletClient,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºææ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> proposalId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createProposal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  target: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TREASURY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  calldata: transferCalldata,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Transfer 10 ETH to community fund&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­¾åææ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">signProposal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ proposalId });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ£€æŸ¥çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProposalState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ proposalId });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ProposalState.Succeeded) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeWithProof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proposalId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    signatures: collectedSignatures,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="ğŸ“¦-å®ç°è®¡åˆ’" tabindex="-1">ğŸ“¦ å®ç°è®¡åˆ’ <a class="header-anchor" href="#ğŸ“¦-å®ç°è®¡åˆ’" aria-label="Permalink to &quot;ğŸ“¦ å®ç°è®¡åˆ’&quot;">â€‹</a></h2><h3 id="phase-1-åŸºç¡€æ¶æ„-1-2å¤©" tabindex="-1">Phase 1: åŸºç¡€æ¶æ„ (1-2å¤©) <a class="header-anchor" href="#phase-1-åŸºç¡€æ¶æ„-1-2å¤©" aria-label="Permalink to &quot;Phase 1: åŸºç¡€æ¶æ„ (1-2å¤©)&quot;">â€‹</a></h3><ol><li><p>åˆ›å»º L2 packages</p><ul><li><code>packages/enduser/</code> - CommunityClient + UserClient</li><li><code>packages/operator/</code> - PaymasterOperatorClient + DAOClient</li></ul></li><li><p>å®šä¹‰åŸºç¡€ç±»å‹å’Œæ¥å£</p><ul><li><code>ClientConfig</code></li><li><code>TransactionOptions</code></li><li><code>BusinessResult&lt;T&gt;</code></li></ul></li><li><p>å®ç°åŸºç±» <code>BaseClient</code></p><ul><li>ç»Ÿä¸€çš„ client ç®¡ç†</li><li>é€šç”¨çš„é”™è¯¯å¤„ç†</li><li>æ—¥å¿—å’Œç›‘æ§</li></ul></li></ol><h3 id="phase-2-communityclient-2-3å¤©" tabindex="-1">Phase 2: CommunityClient (2-3å¤©) <a class="header-anchor" href="#phase-2-communityclient-2-3å¤©" aria-label="Permalink to &quot;Phase 2: CommunityClient (2-3å¤©)&quot;">â€‹</a></h3><ol><li>ç¤¾åŒºåˆ›å»ºä¸é…ç½®</li><li>æˆå‘˜ç®¡ç†</li><li>è§’è‰²ç®¡ç†</li><li>ä¿¡èª‰ç³»ç»Ÿ</li></ol><h3 id="phase-3-paymasteroperatorclient-2-3å¤©" tabindex="-1">Phase 3: PaymasterOperatorClient (2-3å¤©) <a class="header-anchor" href="#phase-3-paymasteroperatorclient-2-3å¤©" aria-label="Permalink to &quot;Phase 3: PaymasterOperatorClient (2-3å¤©)&quot;">â€‹</a></h3><ol><li>è¿è¥å•†æ³¨å†Œ</li><li>èµ„é‡‘ç®¡ç†</li><li>èµåŠ©ç­–ç•¥</li><li>ç›‘æ§å®¡è®¡</li></ol><h3 id="phase-4-userclient-1-2å¤©" tabindex="-1">Phase 4: UserClient (1-2å¤©) <a class="header-anchor" href="#phase-4-userclient-1-2å¤©" aria-label="Permalink to &quot;Phase 4: UserClient (1-2å¤©)&quot;">â€‹</a></h3><ol><li>è´¦æˆ·ç®¡ç†</li><li>SBT ç®¡ç†</li><li>ç§¯åˆ†æ“ä½œ</li><li>èµåŠ©æ“ä½œ</li></ol><h3 id="phase-5-daoclient-1-2å¤©" tabindex="-1">Phase 5: DAOClient (1-2å¤©) <a class="header-anchor" href="#phase-5-daoclient-1-2å¤©" aria-label="Permalink to &quot;Phase 5: DAOClient (1-2å¤©)&quot;">â€‹</a></h3><ol><li>ææ¡ˆç®¡ç†</li><li>æŠ•ç¥¨ç®¡ç†</li><li>æ‰§è¡Œæ“ä½œ</li><li>éªŒè¯å™¨ç®¡ç†</li></ol><h3 id="phase-6-æµ‹è¯•ä¸æ–‡æ¡£-2-3å¤©" tabindex="-1">Phase 6: æµ‹è¯•ä¸æ–‡æ¡£ (2-3å¤©) <a class="header-anchor" href="#phase-6-æµ‹è¯•ä¸æ–‡æ¡£-2-3å¤©" aria-label="Permalink to &quot;Phase 6: æµ‹è¯•ä¸æ–‡æ¡£ (2-3å¤©)&quot;">â€‹</a></h3><ol><li>å•å…ƒæµ‹è¯•</li><li>é›†æˆæµ‹è¯•</li><li>E2E ç¤ºä¾‹</li><li>API æ–‡æ¡£</li></ol><hr><h2 id="ğŸ¯-é¢„æœŸæˆæœ" tabindex="-1">ğŸ¯ é¢„æœŸæˆæœ <a class="header-anchor" href="#ğŸ¯-é¢„æœŸæˆæœ" aria-label="Permalink to &quot;ğŸ¯ é¢„æœŸæˆæœ&quot;">â€‹</a></h2><h3 id="ä»£ç äº¤ä»˜" tabindex="-1">ä»£ç äº¤ä»˜ <a class="header-anchor" href="#ä»£ç äº¤ä»˜" aria-label="Permalink to &quot;ä»£ç äº¤ä»˜&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>packages/</span></span>
<span class="line"><span>â”œâ”€â”€ enduser/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ CommunityClient.ts</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ UserClient.ts</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ types.ts</span></span>
<span class="line"><span>â”‚   â””â”€â”€ tests/</span></span>
<span class="line"><span>â””â”€â”€ operator/</span></span>
<span class="line"><span>    â”œâ”€â”€ src/</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ PaymasterOperatorClient.ts</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ DAOClient.ts</span></span>
<span class="line"><span>    â”‚   â””â”€â”€ types.ts</span></span>
<span class="line"><span>    â””â”€â”€ tests/</span></span></code></pre></div><h3 id="ä½¿ç”¨ä½“éªŒ" tabindex="-1">ä½¿ç”¨ä½“éªŒ <a class="header-anchor" href="#ä½¿ç”¨ä½“éªŒ" aria-label="Permalink to &quot;ä½¿ç”¨ä½“éªŒ&quot;">â€‹</a></h3><p><strong>L1 - åº•å±‚è°ƒç”¨</strong> (ç°åœ¨):</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// éœ€è¦å¤šæ­¥æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> registry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registryActions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">REGISTRY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> factory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xPNTsFactoryActions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FACTORY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(client).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(client).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(client).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCommunityToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>L2 - ä¸šåŠ¡å°è£…</strong> (ç›®æ ‡):</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸€æ­¥å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> community</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommunityClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> community.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createCommunity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My Community&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tokenSymbol: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MYC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><hr><h2 id="ğŸ“-ä¸‹ä¸€æ­¥" tabindex="-1">ğŸ“ ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ğŸ“-ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ğŸ“ ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><ol><li>âœ… å®Œæˆ L1 API Demo</li><li>ğŸ”„ å®¡æ ¸ L2 è®¾è®¡</li><li>â­ï¸ å¼€å§‹ Phase 1: åŸºç¡€æ¶æ„</li><li>â­ï¸ å®ç° CommunityClient</li><li>â­ï¸ å®Œæ•´ L2 æµ‹è¯•</li></ol><p><strong>å‡†å¤‡å¼€å§‹ L2 å¼€å‘ï¼</strong> ğŸš€</p>`,96)])])}const c=i(e,[["render",t]]);export{o as __pageData,c as default};
