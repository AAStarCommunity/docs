# Demo é‡æ„è®¡åˆ’

## é¡¹ç›®ç›®æ ‡
åˆ›å»ºä¸€ä¸ªåŸºäº SDK é«˜å±‚ API (99%) çš„äº¤äº’å¼æ¼”ç¤ºç³»ç»Ÿï¼Œæä¾›æ¸…æ™°çš„å·¦å³åˆ†æ ç•Œé¢ï¼Œå±•ç¤º AAStar ç”Ÿæ€ç³»ç»Ÿçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚

## UI/UX æ¶æ„è®¾è®¡

### ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AAStar Demo                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                           â”‚
â”‚  å·¦ä¾§å¯¼èˆªæ   â”‚            å³ä¾§å†…å®¹åŒºåŸŸ                   â”‚
â”‚              â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Step 1 â”‚  â”‚  â”‚                                     â”‚ â”‚
â”‚  â”‚Accountsâ”‚  â”‚  â”‚    å½“å‰æ­¥éª¤çš„è¯¦ç»†ä¿¡æ¯å’Œæ“ä½œç•Œé¢      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                                     â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  - æ˜¾ç¤ºå†å²è®°å½•                     â”‚ â”‚
â”‚  â”‚ Step 2 â”‚  â”‚  â”‚  - æ˜¾ç¤ºå½“å‰çŠ¶æ€                     â”‚ â”‚
â”‚  â”‚Communityâ”‚  â”‚  â”‚  - æä¾›æ“ä½œæŒ‰é’®                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  - å®æ—¶åé¦ˆ                         â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                                     â”‚ â”‚
â”‚  â”‚ Step 3 â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚Operatorâ”‚  â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                           â”‚
â”‚  â”‚ Step 4 â”‚  â”‚                                           â”‚
â”‚  â”‚End Userâ”‚  â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                           â”‚
â”‚              â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†æ­¥éª¤åŠŸèƒ½è®¾è®¡

#### Step 1: Account Management (è´¦æˆ·ç®¡ç†)
**å³ä¾§æ˜¾ç¤ºå†…å®¹**
- è´¦æˆ·åˆ—è¡¨è¡¨æ ¼

| åç§°    | åœ°å€              | ETH ä½™é¢ | GToken ä½™é¢ | æ“ä½œ    |
|---------|-------------------|----------|-------------|---------|
| Alice   | 0xB6D3...         | 0.1000   | 200.00      | [é€‰æ‹©]  |
| Bob     | 0x2944...         | 0.1000   | 200.00      | [é€‰æ‹©]  |
| Charlie | 0xa74f...         | 0.1000   | 100.00      | [é€‰æ‹©]  |

**æ“ä½œæŒ‰é’®**
- `+ æ–°å»ºè´¦æˆ·` - ç”Ÿæˆæ–°çš„ EOA è´¦æˆ·
- `åˆ·æ–°ä½™é¢` - æ›´æ–°æ‰€æœ‰è´¦æˆ·ä½™é¢
- `å……å€¼é€‰ä¸­è´¦æˆ·` - ä¸ºé€‰ä¸­è´¦æˆ·å……å€¼ ETH å’Œ GToken

**SDK API éœ€æ±‚**
- âœ… `KeyManager.generateAccount()` - ç”Ÿæˆè´¦æˆ·
- âœ… `FundingManager.fundWithETH()` - ETH å……å€¼
- âœ… `FundingManager.fundWithToken()` - Token å……å€¼
- ğŸ†• `StateValidator.getAccountBalances()` - æ‰¹é‡æŸ¥è¯¢ä½™é¢

#### Step 2: Launch Community (å¯åŠ¨ç¤¾åŒº)
**å³ä¾§æ˜¾ç¤ºå†…å®¹**
- å½“å‰è´¦æˆ·çŠ¶æ€å¡ç‰‡
  ```
  é€‰ä¸­è´¦æˆ·: Alice (0xB6D3...)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ç¤¾åŒºçŠ¶æ€                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ âœ… å·²æ³¨å†Œ COMMUNITY è§’è‰²             â”‚
  â”‚ âœ… å·²éƒ¨ç½²ç¤¾åŒº Token                  â”‚
  â”‚                                     â”‚
  â”‚ Token åœ°å€: 0xb65D...               â”‚
  â”‚ Token åç§°: DemoDAO_xxx             â”‚
  â”‚ æ³¨å†Œæ—¶é—´: 2024-12-29 11:37          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

**æ“ä½œæµç¨‹**
- å¦‚æœæœªæ³¨å†Œï¼šæ˜¾ç¤º `[å¯åŠ¨æ–°ç¤¾åŒº]` è¡¨å•
  - ç¤¾åŒºåç§°è¾“å…¥æ¡†
  - ENS åç§°ï¼ˆå¯é€‰ï¼‰
  - æè¿°ï¼ˆå¯é€‰ï¼‰
  - `[ç¡®è®¤å¯åŠ¨]` æŒ‰é’®
- å¦‚æœå·²æ³¨å†Œï¼šæ˜¾ç¤ºç¤¾åŒºè¯¦æƒ… + `[æŸ¥çœ‹ Token è¯¦æƒ…]`

**SDK API éœ€æ±‚**
- âœ… `CommunityClient.launch()` - å¯åŠ¨ç¤¾åŒº
- ğŸ†• `CommunityClient.getCommunityInfo(account)` - æŸ¥è¯¢ç¤¾åŒºä¿¡æ¯
  ```typescript
  {
    hasRole: boolean;
    tokenAddress: Address | null;
    communityData: {
      name: string;
      ensName: string;
      createdAt: number;
    } | null;
  }
  ```

#### Step 3: Setup Operator (è¿è¥å•†è®¾ç½®)
**å³ä¾§æ˜¾ç¤ºå†…å®¹**
- è¿è¥å•†ç±»å‹é€‰æ‹©
  ```
  é€‰ä¸­è´¦æˆ·: Bob (0x2944...)
  è¯·é€‰æ‹©è¿è¥å•†ç±»å‹ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â­• SuperPaymaster (æ¨è)              â”‚
  â”‚    - è·¨ç¤¾åŒºå…±äº«æµåŠ¨æ€§                â”‚
  â”‚    - æ”¯æŒå¤š Token æ”¯ä»˜               â”‚
  â”‚    - éœ€è¦è´¨æŠ¼ 50 GToken + å­˜å…¥ aPNTs â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â­• Paymaster V4 (ç‹¬ç«‹)                â”‚
  â”‚    - ç¤¾åŒºç‹¬ç«‹éƒ¨ç½²                    â”‚
  â”‚    - å•ä¸€ Token æ”¯ä»˜                 â”‚
  â”‚    - éœ€è¦æŒ‡å®š Token å’Œ SBT           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

- å·²æ³¨å†ŒçŠ¶æ€æ˜¾ç¤º
  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ SuperPaymaster è¿è¥å•†                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ âœ… å·²è´¨æŠ¼: 50 GToken                 â”‚
  â”‚ âœ… å·²å­˜å…¥: 100 aPNTs                 â”‚
  â”‚ ğŸ“Š å¯ç”¨ä½™é¢: 75 aPNTs                â”‚
  â”‚ ğŸ¦ Treasury: 0x2944...              â”‚
  â”‚ ğŸ“ˆ Exchange Rate: 1:1               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

**æ“ä½œ:**
- `[è¿½åŠ å­˜æ¬¾]` `[æå–ä½™é¢]` `[ä¿®æ”¹é…ç½®]`

**SDK API éœ€æ±‚**
- âœ… `OperatorClient.onboardOperator()` - æ³¨å†Œè¿è¥å•†ï¼ˆSuperPaymasterï¼‰
- âœ… `OperatorClient.deployPaymasterV4()` - éƒ¨ç½² Paymaster V4
- ğŸ†• `OperatorClient.getOperatorInfo(account)` - æŸ¥è¯¢è¿è¥å•†çŠ¶æ€
  ```typescript
  {
    type: 'super' | 'v4' | null;
    superPaymaster: {
      isConfigured: boolean;
      balance: bigint;
      exchangeRate: bigint;
      treasury: Address;
    } | null;
    paymasterV4: {
      address: Address;
      token: Address;
      balance: bigint;
    } | null;
  }
  ```
- ğŸ†• `OperatorClient.depositFunds(amount)` - è¿½åŠ å­˜æ¬¾
- ğŸ†• `OperatorClient.withdrawFunds(amount)` - æå–ä½™é¢

#### Step 4: Onboard End User (ç”¨æˆ·å…¥é©»)
**å³ä¾§æ˜¾ç¤ºå†…å®¹**
- ç”¨æˆ·è´¦æˆ·æ¥æºé€‰æ‹©
  ```
  é€‰æ‹©ç”¨æˆ·è´¦æˆ·ç±»å‹ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â­• ä»ç°æœ‰ EOA åˆ›å»º                    â”‚
  â”‚    é€‰æ‹©è´¦æˆ·: [ä¸‹æ‹‰åˆ—è¡¨]              â”‚
  â”‚    [åˆ›å»º AA è´¦æˆ·]                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â­• ç”Ÿæˆæ–°çš„ Simple Account           â”‚
  â”‚    ç›å€¼: [è‡ªåŠ¨ç”Ÿæˆ]                  â”‚
  â”‚    [éƒ¨ç½²æ–°è´¦æˆ·]                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

- ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º
  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ AA Account: 0x1234...               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ğŸ“ å·²éƒ¨ç½²                            â”‚
  â”‚ ğŸ‘¤ Owner: Alice (0xB6D3...)         â”‚
  â”‚ ğŸ’° ä½™é¢:                             â”‚
  â”‚    - 0.05 ETH                       â”‚
  â”‚    - 50 xPNTs (ç¤¾åŒº Token)          â”‚
  â”‚    - 100 aPNTs                      â”‚
  â”‚                                     â”‚
  â”‚ ğŸ« SBT æŒæœ‰:                         â”‚
  â”‚    - MySBT #1234 (å·²mint)           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

**æ“ä½œ:**
- `[å……å€¼ xPNTs]` `[Mint SBT]` `[å‘é€ UserOp]`

**SDK API éœ€æ±‚**
- ğŸ†• `EndUserClient.deployAccount(owner, salt?)` - éƒ¨ç½² AA è´¦æˆ·
- ğŸ†• `EndUserClient.getAccountInfo(address)` - æŸ¥è¯¢ AA è´¦æˆ·ä¿¡æ¯
- ğŸ†• `EndUserClient.mintSBT(account)` - ä¸ºç”¨æˆ· Mint SBT
- ğŸ†• `EndUserClient.fundWithXPNTs(account, amount)` - å……å€¼ç¤¾åŒº Token
- âœ… `EndUserClient.sendUserOp()` - å‘é€ UserOperation

## SDK API å¢å¼ºè®¡åˆ’

### ä¼˜å…ˆçº§åˆ†ç±»
**P0 - ç«‹å³å®ç°ï¼ˆçŠ¶æ€æŸ¥è¯¢ç±»ï¼‰**
- `CommunityClient.getCommunityInfo(account: Address)`
- `OperatorClient.getOperatorInfo(account: Address)`
- `StateValidator.getAccountBalances(addresses: Address[])`

**P1 - é«˜ä¼˜å…ˆçº§ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰**
- `EndUserClient.deployAccount(owner: Address, salt?: bigint)`
- `EndUserClient.mintSBT(account: Address)`
- `OperatorClient.depositFunds(amount: bigint)`
- `OperatorClient.withdrawFunds(amount: bigint)`

**P2 - ä¸­ä¼˜å…ˆçº§ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰**
- `EndUserClient.getAccountInfo(address: Address)`
- `EndUserClient.fundWithXPNTs(account: Address, amount: bigint)`

### å›å½’è„šæœ¬åˆ†æ
éœ€è¦ä»ä»¥ä¸‹è„šæœ¬ä¸­æå–åŠŸèƒ½ï¼š

**ç¤¾åŒºç›¸å…³**
- âœ… `01_register_community_raw.ts` - å·²æå–ä¸º `CommunityClient.launch()`
- ğŸ“‹ `09_local_test_community_lifecycle.ts` - ç¤¾åŒºç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹

**è¿è¥å•†ç›¸å…³**
- ğŸ“‹ `deploy_paymaster_v4.ts` - Paymaster V4 éƒ¨ç½²é€»è¾‘
- ğŸ“‹ `05_test_superpaymaster.ts` - SuperPaymaster å®Œæ•´è®¾ç½®æµç¨‹
  - Line 114-199: `setupOperator` å‡½æ•°ï¼ˆåŒ…å«é…ç½®å’Œå­˜æ¬¾ï¼‰

**ç”¨æˆ·ç›¸å…³**
- ğŸ“‹ `deploy_test_accounts.ts` - AA è´¦æˆ·éƒ¨ç½²é€»è¾‘
- ğŸ“‹ `03_test_standard_aa.ts` - AA äº¤äº’æµç¨‹

## å®ç°è·¯çº¿å›¾

### é˜¶æ®µ 1: ä¿®å¤å½“å‰é”™è¯¯ âœ…
- [x] ä¿®å¤ account undefined é”™è¯¯
- [x] ä¿®å¤ gToken undefined é”™è¯¯
- [x] ç¡®ä¿ SDK æ„å»ºæˆåŠŸ

### é˜¶æ®µ 2: SDK API å¢å¼º (1-2å¤©)
- [ ] å®ç° P0 çŠ¶æ€æŸ¥è¯¢ API
- [ ] ä»å›å½’è„šæœ¬æå– `setupOperator` çš„é…ç½®é€»è¾‘
- [ ] ä» `deploy_test_accounts.ts` æå– AA éƒ¨ç½²é€»è¾‘
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•

### é˜¶æ®µ 3: UI é‡æ„ (2-3å¤©)
- [ ] é‡æ„ index.html ä¸ºå·¦å³åˆ†æ å¸ƒå±€
- [ ] å®ç° Step 1: Account Management
- [ ] å®ç° Step 2: Launch Communityï¼ˆçŠ¶æ€æŸ¥è¯¢ + æ“ä½œï¼‰
- [ ] å®ç° Step 3: Setup Operatorï¼ˆç±»å‹é€‰æ‹© + çŠ¶æ€æŸ¥è¯¢ï¼‰
- [ ] å®ç° Step 4: Onboard End User

### é˜¶æ®µ 4: é›†æˆæµ‹è¯• (1å¤©)
- [ ] ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†å®Œå–„

## æŠ€æœ¯ç»†èŠ‚

### å‰ç«¯çŠ¶æ€ç®¡ç†
```javascript
const demoState = {
  selectedAccount: null,      // å½“å‰é€‰ä¸­çš„è´¦æˆ·
  currentStep: 1,              // å½“å‰æ­¥éª¤
  accounts: [],                // è´¦æˆ·åˆ—è¡¨
  communityInfo: {},           // ç¤¾åŒºä¿¡æ¯ç¼“å­˜
  operatorInfo: {},            // è¿è¥å•†ä¿¡æ¯ç¼“å­˜
  aaAccounts: []               // AA è´¦æˆ·åˆ—è¡¨
};
```

### API å“åº”æ ¼å¼è§„èŒƒ
æ‰€æœ‰ SDK API åº”è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š
```typescript
interface SDKResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  txHashes?: Hash[];
}
```

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨
- âœ… ç«‹å³ä¿®å¤: ä¿®å¤ operator è®¾ç½®ä¸­çš„åœ°å€é—®é¢˜
- ğŸ“ è§„åˆ’å®¡æŸ¥: ç”¨æˆ·å®¡æŸ¥æœ¬è®¡åˆ’ï¼Œæä¾›åé¦ˆ
- ğŸ”¨ å¼€å§‹å®æ–½: æŒ‰é˜¶æ®µå®æ–½
